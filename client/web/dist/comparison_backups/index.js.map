{"version":3,"file":"index.js","sources":["../node_modules/kefir/dist/kefir.js","../node_modules/mithril/mithril.js","../node_modules/ramda/es/internal/_isPlaceholder.js","../node_modules/ramda/es/internal/_curry1.js","../node_modules/ramda/es/internal/_curry2.js","../node_modules/ramda/es/internal/_arity.js","../node_modules/ramda/es/internal/_curryN.js","../node_modules/ramda/es/curryN.js","../node_modules/ramda/es/internal/_curry3.js","../node_modules/ramda/es/internal/_isArray.js","../node_modules/ramda/es/internal/_dispatchable.js","../node_modules/ramda/es/internal/_isTransformer.js","../node_modules/ramda/es/internal/_xfBase.js","../node_modules/ramda/es/internal/_map.js","../node_modules/ramda/es/internal/_isString.js","../node_modules/ramda/es/internal/_isArrayLike.js","../node_modules/ramda/es/internal/_xwrap.js","../node_modules/ramda/es/bind.js","../node_modules/ramda/es/internal/_reduce.js","../node_modules/ramda/es/internal/_xmap.js","../node_modules/ramda/es/internal/_has.js","../node_modules/ramda/es/internal/_isArguments.js","../node_modules/ramda/es/keys.js","../node_modules/ramda/es/map.js","../node_modules/ramda/es/reduce.js","../node_modules/ramda/es/internal/_pipe.js","../node_modules/ramda/es/internal/_checkForMethod.js","../node_modules/ramda/es/slice.js","../node_modules/ramda/es/tail.js","../node_modules/ramda/es/reverse.js","../node_modules/ramda/es/compose.js","../node_modules/ramda/es/pipe.js","../node_modules/ramda/es/internal/_objectIs.js","../node_modules/ramda/es/internal/_toISOString.js","../node_modules/ramda/es/partialRight.js","../src/MekWarrior4/interfaces/attributes.ts","../node_modules/ramda/es/trim.js","../src/Utils/objects.ts","../src/MekWarrior4/interfaces/skills.ts","../src/MekWarrior4/interfaces/characters.ts","../src/index.ts"],"sourcesContent":["/*! Kefir.js v3.8.5\n *  https://github.com/kefirjs/kefir\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.Kefir = global.Kefir || {})));\n}(this, (function (exports) { 'use strict';\n\nfunction createObj(proto) {\n  var F = function () {};\n  F.prototype = proto;\n  return new F();\n}\n\nfunction extend(target /*, mixin1, mixin2...*/) {\n  var length = arguments.length,\n      i = void 0,\n      prop = void 0;\n  for (i = 1; i < length; i++) {\n    for (prop in arguments[i]) {\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n}\n\nfunction inherit(Child, Parent /*, mixin1, mixin2...*/) {\n  var length = arguments.length,\n      i = void 0;\n  Child.prototype = createObj(Parent.prototype);\n  Child.prototype.constructor = Child;\n  for (i = 2; i < length; i++) {\n    extend(Child.prototype, arguments[i]);\n  }\n  return Child;\n}\n\nvar NOTHING = ['<nothing>'];\nvar END = 'end';\nvar VALUE = 'value';\nvar ERROR = 'error';\nvar ANY = 'any';\n\nfunction concat(a, b) {\n  var result = void 0,\n      length = void 0,\n      i = void 0,\n      j = void 0;\n  if (a.length === 0) {\n    return b;\n  }\n  if (b.length === 0) {\n    return a;\n  }\n  j = 0;\n  result = new Array(a.length + b.length);\n  length = a.length;\n  for (i = 0; i < length; i++, j++) {\n    result[j] = a[i];\n  }\n  length = b.length;\n  for (i = 0; i < length; i++, j++) {\n    result[j] = b[i];\n  }\n  return result;\n}\n\nfunction find(arr, value) {\n  var length = arr.length,\n      i = void 0;\n  for (i = 0; i < length; i++) {\n    if (arr[i] === value) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nfunction findByPred(arr, pred) {\n  var length = arr.length,\n      i = void 0;\n  for (i = 0; i < length; i++) {\n    if (pred(arr[i])) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nfunction cloneArray(input) {\n  var length = input.length,\n      result = new Array(length),\n      i = void 0;\n  for (i = 0; i < length; i++) {\n    result[i] = input[i];\n  }\n  return result;\n}\n\nfunction remove(input, index) {\n  var length = input.length,\n      result = void 0,\n      i = void 0,\n      j = void 0;\n  if (index >= 0 && index < length) {\n    if (length === 1) {\n      return [];\n    } else {\n      result = new Array(length - 1);\n      for (i = 0, j = 0; i < length; i++) {\n        if (i !== index) {\n          result[j] = input[i];\n          j++;\n        }\n      }\n      return result;\n    }\n  } else {\n    return input;\n  }\n}\n\nfunction map(input, fn) {\n  var length = input.length,\n      result = new Array(length),\n      i = void 0;\n  for (i = 0; i < length; i++) {\n    result[i] = fn(input[i]);\n  }\n  return result;\n}\n\nfunction forEach(arr, fn) {\n  var length = arr.length,\n      i = void 0;\n  for (i = 0; i < length; i++) {\n    fn(arr[i]);\n  }\n}\n\nfunction fillArray(arr, value) {\n  var length = arr.length,\n      i = void 0;\n  for (i = 0; i < length; i++) {\n    arr[i] = value;\n  }\n}\n\nfunction contains(arr, value) {\n  return find(arr, value) !== -1;\n}\n\nfunction slide(cur, next, max) {\n  var length = Math.min(max, cur.length + 1),\n      offset = cur.length - length + 1,\n      result = new Array(length),\n      i = void 0;\n  for (i = offset; i < length; i++) {\n    result[i - offset] = cur[i];\n  }\n  result[length - 1] = next;\n  return result;\n}\n\nfunction callSubscriber(type, fn, event) {\n  if (type === ANY) {\n    fn(event);\n  } else if (type === event.type) {\n    if (type === VALUE || type === ERROR) {\n      fn(event.value);\n    } else {\n      fn();\n    }\n  }\n}\n\nfunction Dispatcher() {\n  this._items = [];\n  this._spies = [];\n  this._inLoop = 0;\n  this._removedItems = null;\n}\n\nextend(Dispatcher.prototype, {\n  add: function (type, fn) {\n    this._items = concat(this._items, [{ type: type, fn: fn }]);\n    return this._items.length;\n  },\n  remove: function (type, fn) {\n    var index = findByPred(this._items, function (x) {\n      return x.type === type && x.fn === fn;\n    });\n\n    // if we're currently in a notification loop,\n    // remember this subscriber was removed\n    if (this._inLoop !== 0 && index !== -1) {\n      if (this._removedItems === null) {\n        this._removedItems = [];\n      }\n      this._removedItems.push(this._items[index]);\n    }\n\n    this._items = remove(this._items, index);\n    return this._items.length;\n  },\n  addSpy: function (fn) {\n    this._spies = concat(this._spies, [fn]);\n    return this._spies.length;\n  },\n\n\n  // Because spies are only ever a function that perform logging as\n  // their only side effect, we don't need the same complicated\n  // removal logic like in remove()\n  removeSpy: function (fn) {\n    this._spies = remove(this._spies, this._spies.indexOf(fn));\n    return this._spies.length;\n  },\n  dispatch: function (event) {\n    this._inLoop++;\n    for (var i = 0, spies = this._spies; this._spies !== null && i < spies.length; i++) {\n      spies[i](event);\n    }\n\n    for (var _i = 0, items = this._items; _i < items.length; _i++) {\n      // cleanup was called\n      if (this._items === null) {\n        break;\n      }\n\n      // this subscriber was removed\n      if (this._removedItems !== null && contains(this._removedItems, items[_i])) {\n        continue;\n      }\n\n      callSubscriber(items[_i].type, items[_i].fn, event);\n    }\n    this._inLoop--;\n    if (this._inLoop === 0) {\n      this._removedItems = null;\n    }\n  },\n  cleanup: function () {\n    this._items = null;\n    this._spies = null;\n  }\n});\n\nfunction Observable() {\n  this._dispatcher = new Dispatcher();\n  this._active = false;\n  this._alive = true;\n  this._activating = false;\n  this._logHandlers = null;\n  this._spyHandlers = null;\n}\n\nextend(Observable.prototype, {\n  _name: 'observable',\n\n  _onActivation: function () {},\n  _onDeactivation: function () {},\n  _setActive: function (active) {\n    if (this._active !== active) {\n      this._active = active;\n      if (active) {\n        this._activating = true;\n        this._onActivation();\n        this._activating = false;\n      } else {\n        this._onDeactivation();\n      }\n    }\n  },\n  _clear: function () {\n    this._setActive(false);\n    this._dispatcher.cleanup();\n    this._dispatcher = null;\n    this._logHandlers = null;\n  },\n  _emit: function (type, x) {\n    switch (type) {\n      case VALUE:\n        return this._emitValue(x);\n      case ERROR:\n        return this._emitError(x);\n      case END:\n        return this._emitEnd();\n    }\n  },\n  _emitValue: function (value) {\n    if (this._alive) {\n      this._dispatcher.dispatch({ type: VALUE, value: value });\n    }\n  },\n  _emitError: function (value) {\n    if (this._alive) {\n      this._dispatcher.dispatch({ type: ERROR, value: value });\n    }\n  },\n  _emitEnd: function () {\n    if (this._alive) {\n      this._alive = false;\n      this._dispatcher.dispatch({ type: END });\n      this._clear();\n    }\n  },\n  _on: function (type, fn) {\n    if (this._alive) {\n      this._dispatcher.add(type, fn);\n      this._setActive(true);\n    } else {\n      callSubscriber(type, fn, { type: END });\n    }\n    return this;\n  },\n  _off: function (type, fn) {\n    if (this._alive) {\n      var count = this._dispatcher.remove(type, fn);\n      if (count === 0) {\n        this._setActive(false);\n      }\n    }\n    return this;\n  },\n  onValue: function (fn) {\n    return this._on(VALUE, fn);\n  },\n  onError: function (fn) {\n    return this._on(ERROR, fn);\n  },\n  onEnd: function (fn) {\n    return this._on(END, fn);\n  },\n  onAny: function (fn) {\n    return this._on(ANY, fn);\n  },\n  offValue: function (fn) {\n    return this._off(VALUE, fn);\n  },\n  offError: function (fn) {\n    return this._off(ERROR, fn);\n  },\n  offEnd: function (fn) {\n    return this._off(END, fn);\n  },\n  offAny: function (fn) {\n    return this._off(ANY, fn);\n  },\n  observe: function (observerOrOnValue, onError, onEnd) {\n    var _this = this;\n    var closed = false;\n\n    var observer = !observerOrOnValue || typeof observerOrOnValue === 'function' ? { value: observerOrOnValue, error: onError, end: onEnd } : observerOrOnValue;\n\n    var handler = function (event) {\n      if (event.type === END) {\n        closed = true;\n      }\n      if (event.type === VALUE && observer.value) {\n        observer.value(event.value);\n      } else if (event.type === ERROR && observer.error) {\n        observer.error(event.value);\n      } else if (event.type === END && observer.end) {\n        observer.end(event.value);\n      }\n    };\n\n    this.onAny(handler);\n\n    return {\n      unsubscribe: function () {\n        if (!closed) {\n          _this.offAny(handler);\n          closed = true;\n        }\n      },\n\n      get closed() {\n        return closed;\n      }\n    };\n  },\n\n\n  // A and B must be subclasses of Stream and Property (order doesn't matter)\n  _ofSameType: function (A, B) {\n    return A.prototype.getType() === this.getType() ? A : B;\n  },\n  setName: function (sourceObs /* optional */, selfName) {\n    this._name = selfName ? sourceObs._name + '.' + selfName : sourceObs;\n    return this;\n  },\n  log: function () {\n    var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.toString();\n\n    var isCurrent = void 0;\n    var handler = function (event) {\n      var type = '<' + event.type + (isCurrent ? ':current' : '') + '>';\n      if (event.type === END) {\n        console.log(name, type);\n      } else {\n        console.log(name, type, event.value);\n      }\n    };\n\n    if (this._alive) {\n      if (!this._logHandlers) {\n        this._logHandlers = [];\n      }\n      this._logHandlers.push({ name: name, handler: handler });\n    }\n\n    isCurrent = true;\n    this.onAny(handler);\n    isCurrent = false;\n\n    return this;\n  },\n  offLog: function () {\n    var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.toString();\n\n    if (this._logHandlers) {\n      var handlerIndex = findByPred(this._logHandlers, function (obj) {\n        return obj.name === name;\n      });\n      if (handlerIndex !== -1) {\n        this.offAny(this._logHandlers[handlerIndex].handler);\n        this._logHandlers.splice(handlerIndex, 1);\n      }\n    }\n\n    return this;\n  },\n  spy: function () {\n    var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.toString();\n\n    var handler = function (event) {\n      var type = '<' + event.type + '>';\n      if (event.type === END) {\n        console.log(name, type);\n      } else {\n        console.log(name, type, event.value);\n      }\n    };\n    if (this._alive) {\n      if (!this._spyHandlers) {\n        this._spyHandlers = [];\n      }\n      this._spyHandlers.push({ name: name, handler: handler });\n      this._dispatcher.addSpy(handler);\n    }\n    return this;\n  },\n  offSpy: function () {\n    var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.toString();\n\n    if (this._spyHandlers) {\n      var handlerIndex = findByPred(this._spyHandlers, function (obj) {\n        return obj.name === name;\n      });\n      if (handlerIndex !== -1) {\n        this._dispatcher.removeSpy(this._spyHandlers[handlerIndex].handler);\n        this._spyHandlers.splice(handlerIndex, 1);\n      }\n    }\n    return this;\n  }\n});\n\n// extend() can't handle `toString` in IE8\nObservable.prototype.toString = function () {\n  return '[' + this._name + ']';\n};\n\nfunction Stream() {\n  Observable.call(this);\n}\n\ninherit(Stream, Observable, {\n  _name: 'stream',\n\n  getType: function () {\n    return 'stream';\n  }\n});\n\nfunction Property() {\n  Observable.call(this);\n  this._currentEvent = null;\n}\n\ninherit(Property, Observable, {\n  _name: 'property',\n\n  _emitValue: function (value) {\n    if (this._alive) {\n      this._currentEvent = { type: VALUE, value: value };\n      if (!this._activating) {\n        this._dispatcher.dispatch({ type: VALUE, value: value });\n      }\n    }\n  },\n  _emitError: function (value) {\n    if (this._alive) {\n      this._currentEvent = { type: ERROR, value: value };\n      if (!this._activating) {\n        this._dispatcher.dispatch({ type: ERROR, value: value });\n      }\n    }\n  },\n  _emitEnd: function () {\n    if (this._alive) {\n      this._alive = false;\n      if (!this._activating) {\n        this._dispatcher.dispatch({ type: END });\n      }\n      this._clear();\n    }\n  },\n  _on: function (type, fn) {\n    if (this._alive) {\n      this._dispatcher.add(type, fn);\n      this._setActive(true);\n    }\n    if (this._currentEvent !== null) {\n      callSubscriber(type, fn, this._currentEvent);\n    }\n    if (!this._alive) {\n      callSubscriber(type, fn, { type: END });\n    }\n    return this;\n  },\n  getType: function () {\n    return 'property';\n  }\n});\n\nvar neverS = new Stream();\nneverS._emitEnd();\nneverS._name = 'never';\n\nfunction never() {\n  return neverS;\n}\n\nfunction timeBased(mixin) {\n  function AnonymousStream(wait, options) {\n    var _this = this;\n\n    Stream.call(this);\n    this._wait = wait;\n    this._intervalId = null;\n    this._$onTick = function () {\n      return _this._onTick();\n    };\n    this._init(options);\n  }\n\n  inherit(AnonymousStream, Stream, {\n    _init: function () {},\n    _free: function () {},\n    _onTick: function () {},\n    _onActivation: function () {\n      this._intervalId = setInterval(this._$onTick, this._wait);\n    },\n    _onDeactivation: function () {\n      if (this._intervalId !== null) {\n        clearInterval(this._intervalId);\n        this._intervalId = null;\n      }\n    },\n    _clear: function () {\n      Stream.prototype._clear.call(this);\n      this._$onTick = null;\n      this._free();\n    }\n  }, mixin);\n\n  return AnonymousStream;\n}\n\nvar S = timeBased({\n  _name: 'later',\n\n  _init: function (_ref) {\n    var x = _ref.x;\n\n    this._x = x;\n  },\n  _free: function () {\n    this._x = null;\n  },\n  _onTick: function () {\n    this._emitValue(this._x);\n    this._emitEnd();\n  }\n});\n\nfunction later(wait, x) {\n  return new S(wait, { x: x });\n}\n\nvar S$1 = timeBased({\n  _name: 'interval',\n\n  _init: function (_ref) {\n    var x = _ref.x;\n\n    this._x = x;\n  },\n  _free: function () {\n    this._x = null;\n  },\n  _onTick: function () {\n    this._emitValue(this._x);\n  }\n});\n\nfunction interval(wait, x) {\n  return new S$1(wait, { x: x });\n}\n\nvar S$2 = timeBased({\n  _name: 'sequentially',\n\n  _init: function (_ref) {\n    var xs = _ref.xs;\n\n    this._xs = cloneArray(xs);\n  },\n  _free: function () {\n    this._xs = null;\n  },\n  _onTick: function () {\n    if (this._xs.length === 1) {\n      this._emitValue(this._xs[0]);\n      this._emitEnd();\n    } else {\n      this._emitValue(this._xs.shift());\n    }\n  }\n});\n\nfunction sequentially(wait, xs) {\n  return xs.length === 0 ? never() : new S$2(wait, { xs: xs });\n}\n\nvar S$3 = timeBased({\n  _name: 'fromPoll',\n\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._fn = fn;\n  },\n  _free: function () {\n    this._fn = null;\n  },\n  _onTick: function () {\n    var fn = this._fn;\n    this._emitValue(fn());\n  }\n});\n\nfunction fromPoll(wait, fn) {\n  return new S$3(wait, { fn: fn });\n}\n\nfunction emitter(obs) {\n  function value(x) {\n    obs._emitValue(x);\n    return obs._active;\n  }\n\n  function error(x) {\n    obs._emitError(x);\n    return obs._active;\n  }\n\n  function end() {\n    obs._emitEnd();\n    return obs._active;\n  }\n\n  function event(e) {\n    obs._emit(e.type, e.value);\n    return obs._active;\n  }\n\n  return {\n    value: value,\n    error: error,\n    end: end,\n    event: event,\n\n    // legacy\n    emit: value,\n    emitEvent: event\n  };\n}\n\nvar S$4 = timeBased({\n  _name: 'withInterval',\n\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._fn = fn;\n    this._emitter = emitter(this);\n  },\n  _free: function () {\n    this._fn = null;\n    this._emitter = null;\n  },\n  _onTick: function () {\n    var fn = this._fn;\n    fn(this._emitter);\n  }\n});\n\nfunction withInterval(wait, fn) {\n  return new S$4(wait, { fn: fn });\n}\n\nfunction S$5(fn) {\n  Stream.call(this);\n  this._fn = fn;\n  this._unsubscribe = null;\n}\n\ninherit(S$5, Stream, {\n  _name: 'stream',\n\n  _onActivation: function () {\n    var fn = this._fn;\n    var unsubscribe = fn(emitter(this));\n    this._unsubscribe = typeof unsubscribe === 'function' ? unsubscribe : null;\n\n    // fix https://github.com/kefirjs/kefir/issues/35\n    if (!this._active) {\n      this._callUnsubscribe();\n    }\n  },\n  _callUnsubscribe: function () {\n    if (this._unsubscribe !== null) {\n      this._unsubscribe();\n      this._unsubscribe = null;\n    }\n  },\n  _onDeactivation: function () {\n    this._callUnsubscribe();\n  },\n  _clear: function () {\n    Stream.prototype._clear.call(this);\n    this._fn = null;\n  }\n});\n\nfunction stream(fn) {\n  return new S$5(fn);\n}\n\nfunction fromCallback(callbackConsumer) {\n  var called = false;\n\n  return stream(function (emitter) {\n    if (!called) {\n      callbackConsumer(function (x) {\n        emitter.emit(x);\n        emitter.end();\n      });\n      called = true;\n    }\n  }).setName('fromCallback');\n}\n\nfunction fromNodeCallback(callbackConsumer) {\n  var called = false;\n\n  return stream(function (emitter) {\n    if (!called) {\n      callbackConsumer(function (error, x) {\n        if (error) {\n          emitter.error(error);\n        } else {\n          emitter.emit(x);\n        }\n        emitter.end();\n      });\n      called = true;\n    }\n  }).setName('fromNodeCallback');\n}\n\nfunction spread(fn, length) {\n  switch (length) {\n    case 0:\n      return function () {\n        return fn();\n      };\n    case 1:\n      return function (a) {\n        return fn(a[0]);\n      };\n    case 2:\n      return function (a) {\n        return fn(a[0], a[1]);\n      };\n    case 3:\n      return function (a) {\n        return fn(a[0], a[1], a[2]);\n      };\n    case 4:\n      return function (a) {\n        return fn(a[0], a[1], a[2], a[3]);\n      };\n    default:\n      return function (a) {\n        return fn.apply(null, a);\n      };\n  }\n}\n\nfunction apply(fn, c, a) {\n  var aLength = a ? a.length : 0;\n  if (c == null) {\n    switch (aLength) {\n      case 0:\n        return fn();\n      case 1:\n        return fn(a[0]);\n      case 2:\n        return fn(a[0], a[1]);\n      case 3:\n        return fn(a[0], a[1], a[2]);\n      case 4:\n        return fn(a[0], a[1], a[2], a[3]);\n      default:\n        return fn.apply(null, a);\n    }\n  } else {\n    switch (aLength) {\n      case 0:\n        return fn.call(c);\n      default:\n        return fn.apply(c, a);\n    }\n  }\n}\n\nfunction fromSubUnsub(sub, unsub, transformer /* Function | falsey */) {\n  return stream(function (emitter) {\n    var handler = transformer ? function () {\n      emitter.emit(apply(transformer, this, arguments));\n    } : function (x) {\n      emitter.emit(x);\n    };\n\n    sub(handler);\n    return function () {\n      return unsub(handler);\n    };\n  }).setName('fromSubUnsub');\n}\n\nvar pairs = [['addEventListener', 'removeEventListener'], ['addListener', 'removeListener'], ['on', 'off']];\n\nfunction fromEvents(target, eventName, transformer) {\n  var sub = void 0,\n      unsub = void 0;\n\n  for (var i = 0; i < pairs.length; i++) {\n    if (typeof target[pairs[i][0]] === 'function' && typeof target[pairs[i][1]] === 'function') {\n      sub = pairs[i][0];\n      unsub = pairs[i][1];\n      break;\n    }\n  }\n\n  if (sub === undefined) {\n    throw new Error(\"target don't support any of \" + 'addEventListener/removeEventListener, addListener/removeListener, on/off method pair');\n  }\n\n  return fromSubUnsub(function (handler) {\n    return target[sub](eventName, handler);\n  }, function (handler) {\n    return target[unsub](eventName, handler);\n  }, transformer).setName('fromEvents');\n}\n\n// HACK:\n//   We don't call parent Class constructor, but instead putting all necessary\n//   properties into prototype to simulate ended Property\n//   (see Propperty and Observable classes).\n\nfunction P(value) {\n  this._currentEvent = { type: 'value', value: value, current: true };\n}\n\ninherit(P, Property, {\n  _name: 'constant',\n  _active: false,\n  _activating: false,\n  _alive: false,\n  _dispatcher: null,\n  _logHandlers: null\n});\n\nfunction constant(x) {\n  return new P(x);\n}\n\n// HACK:\n//   We don't call parent Class constructor, but instead putting all necessary\n//   properties into prototype to simulate ended Property\n//   (see Propperty and Observable classes).\n\nfunction P$1(value) {\n  this._currentEvent = { type: 'error', value: value, current: true };\n}\n\ninherit(P$1, Property, {\n  _name: 'constantError',\n  _active: false,\n  _activating: false,\n  _alive: false,\n  _dispatcher: null,\n  _logHandlers: null\n});\n\nfunction constantError(x) {\n  return new P$1(x);\n}\n\nfunction createConstructor(BaseClass, name) {\n  return function AnonymousObservable(source, options) {\n    var _this = this;\n\n    BaseClass.call(this);\n    this._source = source;\n    this._name = source._name + '.' + name;\n    this._init(options);\n    this._$handleAny = function (event) {\n      return _this._handleAny(event);\n    };\n  };\n}\n\nfunction createClassMethods(BaseClass) {\n  return {\n    _init: function () {},\n    _free: function () {},\n    _handleValue: function (x) {\n      this._emitValue(x);\n    },\n    _handleError: function (x) {\n      this._emitError(x);\n    },\n    _handleEnd: function () {\n      this._emitEnd();\n    },\n    _handleAny: function (event) {\n      switch (event.type) {\n        case VALUE:\n          return this._handleValue(event.value);\n        case ERROR:\n          return this._handleError(event.value);\n        case END:\n          return this._handleEnd();\n      }\n    },\n    _onActivation: function () {\n      this._source.onAny(this._$handleAny);\n    },\n    _onDeactivation: function () {\n      this._source.offAny(this._$handleAny);\n    },\n    _clear: function () {\n      BaseClass.prototype._clear.call(this);\n      this._source = null;\n      this._$handleAny = null;\n      this._free();\n    }\n  };\n}\n\nfunction createStream(name, mixin) {\n  var S = createConstructor(Stream, name);\n  inherit(S, Stream, createClassMethods(Stream), mixin);\n  return S;\n}\n\nfunction createProperty(name, mixin) {\n  var P = createConstructor(Property, name);\n  inherit(P, Property, createClassMethods(Property), mixin);\n  return P;\n}\n\nvar P$2 = createProperty('toProperty', {\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._getInitialCurrent = fn;\n  },\n  _onActivation: function () {\n    if (this._getInitialCurrent !== null) {\n      var getInitial = this._getInitialCurrent;\n      this._emitValue(getInitial());\n    }\n    this._source.onAny(this._$handleAny); // copied from patterns/one-source\n  }\n});\n\nfunction toProperty(obs) {\n  var fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (fn !== null && typeof fn !== 'function') {\n    throw new Error('You should call toProperty() with a function or no arguments.');\n  }\n  return new P$2(obs, { fn: fn });\n}\n\nvar S$6 = createStream('changes', {\n  _handleValue: function (x) {\n    if (!this._activating) {\n      this._emitValue(x);\n    }\n  },\n  _handleError: function (x) {\n    if (!this._activating) {\n      this._emitError(x);\n    }\n  }\n});\n\nfunction changes(obs) {\n  return new S$6(obs);\n}\n\nfunction fromPromise(promise) {\n  var called = false;\n\n  var result = stream(function (emitter) {\n    if (!called) {\n      var onValue = function (x) {\n        emitter.emit(x);\n        emitter.end();\n      };\n      var onError = function (x) {\n        emitter.error(x);\n        emitter.end();\n      };\n      var _promise = promise.then(onValue, onError);\n\n      // prevent libraries like 'Q' or 'when' from swallowing exceptions\n      if (_promise && typeof _promise.done === 'function') {\n        _promise.done();\n      }\n\n      called = true;\n    }\n  });\n\n  return toProperty(result, null).setName('fromPromise');\n}\n\nfunction getGlodalPromise() {\n  if (typeof Promise === 'function') {\n    return Promise;\n  } else {\n    throw new Error(\"There isn't default Promise, use shim or parameter\");\n  }\n}\n\nvar toPromise = function (obs) {\n  var Promise = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getGlodalPromise();\n\n  var last = null;\n  return new Promise(function (resolve, reject) {\n    obs.onAny(function (event) {\n      if (event.type === END && last !== null) {\n        (last.type === VALUE ? resolve : reject)(last.value);\n        last = null;\n      } else {\n        last = event;\n      }\n    });\n  });\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar ponyfill = createCommonjsModule(function (module, exports) {\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports['default'] = symbolObservablePonyfill;\nfunction symbolObservablePonyfill(root) {\n\tvar result;\n\tvar _Symbol = root.Symbol;\n\n\tif (typeof _Symbol === 'function') {\n\t\tif (_Symbol.observable) {\n\t\t\tresult = _Symbol.observable;\n\t\t} else {\n\t\t\tresult = _Symbol('observable');\n\t\t\t_Symbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n}\n});\n\nvar index$1 = createCommonjsModule(function (module, exports) {\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n\n\nvar _ponyfill2 = _interopRequireDefault(ponyfill);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { 'default': obj };\n}\n\nvar root; /* global window */\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof commonjsGlobal !== 'undefined') {\n  root = commonjsGlobal;\n} else {\n  root = module;\n}\n\nvar result = (0, _ponyfill2['default'])(root);\nexports['default'] = result;\n});\n\nvar index = index$1;\n\n// this file contains some hot JS modules systems stuff\n\nvar $$observable = index.default ? index.default : index;\n\nfunction fromESObservable(_observable) {\n  var observable = _observable[$$observable] ? _observable[$$observable]() : _observable;\n  return stream(function (emitter) {\n    var unsub = observable.subscribe({\n      error: function (error) {\n        emitter.error(error);\n        emitter.end();\n      },\n      next: function (value) {\n        emitter.emit(value);\n      },\n      complete: function () {\n        emitter.end();\n      }\n    });\n\n    if (unsub.unsubscribe) {\n      return function () {\n        unsub.unsubscribe();\n      };\n    } else {\n      return unsub;\n    }\n  }).setName('fromESObservable');\n}\n\nfunction ESObservable(observable) {\n  this._observable = observable.takeErrors(1);\n}\n\nextend(ESObservable.prototype, {\n  subscribe: function (observerOrOnNext, onError, onComplete) {\n    var _this = this;\n\n    var observer = typeof observerOrOnNext === 'function' ? { next: observerOrOnNext, error: onError, complete: onComplete } : observerOrOnNext;\n\n    var fn = function (event) {\n      if (event.type === END) {\n        closed = true;\n      }\n\n      if (event.type === VALUE && observer.next) {\n        observer.next(event.value);\n      } else if (event.type === ERROR && observer.error) {\n        observer.error(event.value);\n      } else if (event.type === END && observer.complete) {\n        observer.complete(event.value);\n      }\n    };\n\n    this._observable.onAny(fn);\n    var closed = false;\n\n    var subscription = {\n      unsubscribe: function () {\n        closed = true;\n        _this._observable.offAny(fn);\n      },\n      get closed() {\n        return closed;\n      }\n    };\n    return subscription;\n  }\n});\n\n// Need to assign directly b/c Symbols aren't enumerable.\nESObservable.prototype[$$observable] = function () {\n  return this;\n};\n\nfunction toESObservable() {\n  return new ESObservable(this);\n}\n\nfunction collect(source, keys, values) {\n  for (var prop in source) {\n    if (source.hasOwnProperty(prop)) {\n      keys.push(prop);\n      values.push(source[prop]);\n    }\n  }\n}\n\nfunction defaultErrorsCombinator(errors) {\n  var latestError = void 0;\n  for (var i = 0; i < errors.length; i++) {\n    if (errors[i] !== undefined) {\n      if (latestError === undefined || latestError.index < errors[i].index) {\n        latestError = errors[i];\n      }\n    }\n  }\n  return latestError.error;\n}\n\nfunction Combine(active, passive, combinator) {\n  var _this = this;\n\n  Stream.call(this);\n  this._activeCount = active.length;\n  this._sources = concat(active, passive);\n  this._combinator = combinator;\n  this._aliveCount = 0;\n  this._latestValues = new Array(this._sources.length);\n  this._latestErrors = new Array(this._sources.length);\n  fillArray(this._latestValues, NOTHING);\n  this._emitAfterActivation = false;\n  this._endAfterActivation = false;\n  this._latestErrorIndex = 0;\n\n  this._$handlers = [];\n\n  var _loop = function (i) {\n    _this._$handlers.push(function (event) {\n      return _this._handleAny(i, event);\n    });\n  };\n\n  for (var i = 0; i < this._sources.length; i++) {\n    _loop(i);\n  }\n}\n\ninherit(Combine, Stream, {\n  _name: 'combine',\n\n  _onActivation: function () {\n    this._aliveCount = this._activeCount;\n\n    // we need to suscribe to _passive_ sources before _active_\n    // (see https://github.com/kefirjs/kefir/issues/98)\n    for (var i = this._activeCount; i < this._sources.length; i++) {\n      this._sources[i].onAny(this._$handlers[i]);\n    }\n    for (var _i = 0; _i < this._activeCount; _i++) {\n      this._sources[_i].onAny(this._$handlers[_i]);\n    }\n\n    if (this._emitAfterActivation) {\n      this._emitAfterActivation = false;\n      this._emitIfFull();\n    }\n    if (this._endAfterActivation) {\n      this._emitEnd();\n    }\n  },\n  _onDeactivation: function () {\n    var length = this._sources.length,\n        i = void 0;\n    for (i = 0; i < length; i++) {\n      this._sources[i].offAny(this._$handlers[i]);\n    }\n  },\n  _emitIfFull: function () {\n    var hasAllValues = true;\n    var hasErrors = false;\n    var length = this._latestValues.length;\n    var valuesCopy = new Array(length);\n    var errorsCopy = new Array(length);\n\n    for (var i = 0; i < length; i++) {\n      valuesCopy[i] = this._latestValues[i];\n      errorsCopy[i] = this._latestErrors[i];\n\n      if (valuesCopy[i] === NOTHING) {\n        hasAllValues = false;\n      }\n\n      if (errorsCopy[i] !== undefined) {\n        hasErrors = true;\n      }\n    }\n\n    if (hasAllValues) {\n      var combinator = this._combinator;\n      this._emitValue(combinator(valuesCopy));\n    }\n    if (hasErrors) {\n      this._emitError(defaultErrorsCombinator(errorsCopy));\n    }\n  },\n  _handleAny: function (i, event) {\n    if (event.type === VALUE || event.type === ERROR) {\n      if (event.type === VALUE) {\n        this._latestValues[i] = event.value;\n        this._latestErrors[i] = undefined;\n      }\n      if (event.type === ERROR) {\n        this._latestValues[i] = NOTHING;\n        this._latestErrors[i] = {\n          index: this._latestErrorIndex++,\n          error: event.value\n        };\n      }\n\n      if (i < this._activeCount) {\n        if (this._activating) {\n          this._emitAfterActivation = true;\n        } else {\n          this._emitIfFull();\n        }\n      }\n    } else {\n      // END\n\n      if (i < this._activeCount) {\n        this._aliveCount--;\n        if (this._aliveCount === 0) {\n          if (this._activating) {\n            this._endAfterActivation = true;\n          } else {\n            this._emitEnd();\n          }\n        }\n      }\n    }\n  },\n  _clear: function () {\n    Stream.prototype._clear.call(this);\n    this._sources = null;\n    this._latestValues = null;\n    this._latestErrors = null;\n    this._combinator = null;\n    this._$handlers = null;\n  }\n});\n\nfunction combineAsArray(active) {\n  var passive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var combinator = arguments[2];\n\n  if (!Array.isArray(passive)) {\n    throw new Error('Combine can only combine active and passive collections of the same type.');\n  }\n\n  combinator = combinator ? spread(combinator, active.length + passive.length) : function (x) {\n    return x;\n  };\n  return active.length === 0 ? never() : new Combine(active, passive, combinator);\n}\n\nfunction combineAsObject(active) {\n  var passive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var combinator = arguments[2];\n\n  if (typeof passive !== 'object' || Array.isArray(passive)) {\n    throw new Error('Combine can only combine active and passive collections of the same type.');\n  }\n\n  var keys = [],\n      activeObservables = [],\n      passiveObservables = [];\n\n  collect(active, keys, activeObservables);\n  collect(passive, keys, passiveObservables);\n\n  var objectify = function (values) {\n    var event = {};\n    for (var i = values.length - 1; 0 <= i; i--) {\n      event[keys[i]] = values[i];\n    }\n    return combinator ? combinator(event) : event;\n  };\n\n  return activeObservables.length === 0 ? never() : new Combine(activeObservables, passiveObservables, objectify);\n}\n\nfunction combine(active, passive, combinator) {\n  if (typeof passive === 'function') {\n    combinator = passive;\n    passive = undefined;\n  }\n\n  return Array.isArray(active) ? combineAsArray(active, passive, combinator) : combineAsObject(active, passive, combinator);\n}\n\nvar Observable$2 = {\n  empty: function () {\n    return never();\n  },\n\n\n  // Monoid based on merge() seems more useful than one based on concat().\n  concat: function (a, b) {\n    return a.merge(b);\n  },\n  of: function (x) {\n    return constant(x);\n  },\n  map: function (fn, obs) {\n    return obs.map(fn);\n  },\n  bimap: function (fnErr, fnVal, obs) {\n    return obs.mapErrors(fnErr).map(fnVal);\n  },\n\n\n  // This ap strictly speaking incompatible with chain. If we derive ap from chain we get\n  // different (not very useful) behavior. But spec requires that if method can be derived\n  // it must have the same behavior as hand-written method. We intentionally violate the spec\n  // in hope that it won't cause many troubles in practice. And in return we have more useful type.\n  ap: function (obsFn, obsVal) {\n    return combine([obsFn, obsVal], function (fn, val) {\n      return fn(val);\n    });\n  },\n  chain: function (fn, obs) {\n    return obs.flatMap(fn);\n  }\n};\n\n\n\nvar staticLand = Object.freeze({\n\tObservable: Observable$2\n});\n\nvar mixin = {\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._fn = fn;\n  },\n  _free: function () {\n    this._fn = null;\n  },\n  _handleValue: function (x) {\n    var fn = this._fn;\n    this._emitValue(fn(x));\n  }\n};\n\nvar S$7 = createStream('map', mixin);\nvar P$3 = createProperty('map', mixin);\n\nvar id = function (x) {\n  return x;\n};\n\nfunction map$1(obs) {\n  var fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : id;\n\n  return new (obs._ofSameType(S$7, P$3))(obs, { fn: fn });\n}\n\nvar mixin$1 = {\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._fn = fn;\n  },\n  _free: function () {\n    this._fn = null;\n  },\n  _handleValue: function (x) {\n    var fn = this._fn;\n    if (fn(x)) {\n      this._emitValue(x);\n    }\n  }\n};\n\nvar S$8 = createStream('filter', mixin$1);\nvar P$4 = createProperty('filter', mixin$1);\n\nvar id$1 = function (x) {\n  return x;\n};\n\nfunction filter(obs) {\n  var fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : id$1;\n\n  return new (obs._ofSameType(S$8, P$4))(obs, { fn: fn });\n}\n\nvar mixin$2 = {\n  _init: function (_ref) {\n    var n = _ref.n;\n\n    this._n = n;\n    if (n <= 0) {\n      this._emitEnd();\n    }\n  },\n  _handleValue: function (x) {\n    if (this._n === 0) {\n      return;\n    }\n    this._n--;\n    this._emitValue(x);\n    if (this._n === 0) {\n      this._emitEnd();\n    }\n  }\n};\n\nvar S$9 = createStream('take', mixin$2);\nvar P$5 = createProperty('take', mixin$2);\n\nfunction take(obs, n) {\n  return new (obs._ofSameType(S$9, P$5))(obs, { n: n });\n}\n\nvar mixin$3 = {\n  _init: function (_ref) {\n    var n = _ref.n;\n\n    this._n = n;\n    if (n <= 0) {\n      this._emitEnd();\n    }\n  },\n  _handleError: function (x) {\n    if (this._n === 0) {\n      return;\n    }\n    this._n--;\n    this._emitError(x);\n    if (this._n === 0) {\n      this._emitEnd();\n    }\n  }\n};\n\nvar S$10 = createStream('takeErrors', mixin$3);\nvar P$6 = createProperty('takeErrors', mixin$3);\n\nfunction takeErrors(obs, n) {\n  return new (obs._ofSameType(S$10, P$6))(obs, { n: n });\n}\n\nvar mixin$4 = {\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._fn = fn;\n  },\n  _free: function () {\n    this._fn = null;\n  },\n  _handleValue: function (x) {\n    var fn = this._fn;\n    if (fn(x)) {\n      this._emitValue(x);\n    } else {\n      this._emitEnd();\n    }\n  }\n};\n\nvar S$11 = createStream('takeWhile', mixin$4);\nvar P$7 = createProperty('takeWhile', mixin$4);\n\nvar id$2 = function (x) {\n  return x;\n};\n\nfunction takeWhile(obs) {\n  var fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : id$2;\n\n  return new (obs._ofSameType(S$11, P$7))(obs, { fn: fn });\n}\n\nvar mixin$5 = {\n  _init: function () {\n    this._lastValue = NOTHING;\n  },\n  _free: function () {\n    this._lastValue = null;\n  },\n  _handleValue: function (x) {\n    this._lastValue = x;\n  },\n  _handleEnd: function () {\n    if (this._lastValue !== NOTHING) {\n      this._emitValue(this._lastValue);\n    }\n    this._emitEnd();\n  }\n};\n\nvar S$12 = createStream('last', mixin$5);\nvar P$8 = createProperty('last', mixin$5);\n\nfunction last(obs) {\n  return new (obs._ofSameType(S$12, P$8))(obs);\n}\n\nvar mixin$6 = {\n  _init: function (_ref) {\n    var n = _ref.n;\n\n    this._n = Math.max(0, n);\n  },\n  _handleValue: function (x) {\n    if (this._n === 0) {\n      this._emitValue(x);\n    } else {\n      this._n--;\n    }\n  }\n};\n\nvar S$13 = createStream('skip', mixin$6);\nvar P$9 = createProperty('skip', mixin$6);\n\nfunction skip(obs, n) {\n  return new (obs._ofSameType(S$13, P$9))(obs, { n: n });\n}\n\nvar mixin$7 = {\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._fn = fn;\n  },\n  _free: function () {\n    this._fn = null;\n  },\n  _handleValue: function (x) {\n    var fn = this._fn;\n    if (this._fn !== null && !fn(x)) {\n      this._fn = null;\n    }\n    if (this._fn === null) {\n      this._emitValue(x);\n    }\n  }\n};\n\nvar S$14 = createStream('skipWhile', mixin$7);\nvar P$10 = createProperty('skipWhile', mixin$7);\n\nvar id$3 = function (x) {\n  return x;\n};\n\nfunction skipWhile(obs) {\n  var fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : id$3;\n\n  return new (obs._ofSameType(S$14, P$10))(obs, { fn: fn });\n}\n\nvar mixin$8 = {\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._fn = fn;\n    this._prev = NOTHING;\n  },\n  _free: function () {\n    this._fn = null;\n    this._prev = null;\n  },\n  _handleValue: function (x) {\n    var fn = this._fn;\n    if (this._prev === NOTHING || !fn(this._prev, x)) {\n      this._prev = x;\n      this._emitValue(x);\n    }\n  }\n};\n\nvar S$15 = createStream('skipDuplicates', mixin$8);\nvar P$11 = createProperty('skipDuplicates', mixin$8);\n\nvar eq = function (a, b) {\n  return a === b;\n};\n\nfunction skipDuplicates(obs) {\n  var fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : eq;\n\n  return new (obs._ofSameType(S$15, P$11))(obs, { fn: fn });\n}\n\nvar mixin$9 = {\n  _init: function (_ref) {\n    var fn = _ref.fn,\n        seed = _ref.seed;\n\n    this._fn = fn;\n    this._prev = seed;\n  },\n  _free: function () {\n    this._prev = null;\n    this._fn = null;\n  },\n  _handleValue: function (x) {\n    if (this._prev !== NOTHING) {\n      var fn = this._fn;\n      this._emitValue(fn(this._prev, x));\n    }\n    this._prev = x;\n  }\n};\n\nvar S$16 = createStream('diff', mixin$9);\nvar P$12 = createProperty('diff', mixin$9);\n\nfunction defaultFn(a, b) {\n  return [a, b];\n}\n\nfunction diff(obs, fn) {\n  var seed = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : NOTHING;\n\n  return new (obs._ofSameType(S$16, P$12))(obs, { fn: fn || defaultFn, seed: seed });\n}\n\nvar P$13 = createProperty('scan', {\n  _init: function (_ref) {\n    var fn = _ref.fn,\n        seed = _ref.seed;\n\n    this._fn = fn;\n    this._seed = seed;\n    if (seed !== NOTHING) {\n      this._emitValue(seed);\n    }\n  },\n  _free: function () {\n    this._fn = null;\n    this._seed = null;\n  },\n  _handleValue: function (x) {\n    var fn = this._fn;\n    if (this._currentEvent === null || this._currentEvent.type === ERROR) {\n      this._emitValue(this._seed === NOTHING ? x : fn(this._seed, x));\n    } else {\n      this._emitValue(fn(this._currentEvent.value, x));\n    }\n  }\n});\n\nfunction scan(obs, fn) {\n  var seed = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : NOTHING;\n\n  return new P$13(obs, { fn: fn, seed: seed });\n}\n\nvar mixin$10 = {\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._fn = fn;\n  },\n  _free: function () {\n    this._fn = null;\n  },\n  _handleValue: function (x) {\n    var fn = this._fn;\n    var xs = fn(x);\n    for (var i = 0; i < xs.length; i++) {\n      this._emitValue(xs[i]);\n    }\n  }\n};\n\nvar S$17 = createStream('flatten', mixin$10);\n\nvar id$4 = function (x) {\n  return x;\n};\n\nfunction flatten(obs) {\n  var fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : id$4;\n\n  return new S$17(obs, { fn: fn });\n}\n\nvar END_MARKER = {};\n\nvar mixin$11 = {\n  _init: function (_ref) {\n    var _this = this;\n\n    var wait = _ref.wait;\n\n    this._wait = Math.max(0, wait);\n    this._buff = [];\n    this._$shiftBuff = function () {\n      var value = _this._buff.shift();\n      if (value === END_MARKER) {\n        _this._emitEnd();\n      } else {\n        _this._emitValue(value);\n      }\n    };\n  },\n  _free: function () {\n    this._buff = null;\n    this._$shiftBuff = null;\n  },\n  _handleValue: function (x) {\n    if (this._activating) {\n      this._emitValue(x);\n    } else {\n      this._buff.push(x);\n      setTimeout(this._$shiftBuff, this._wait);\n    }\n  },\n  _handleEnd: function () {\n    if (this._activating) {\n      this._emitEnd();\n    } else {\n      this._buff.push(END_MARKER);\n      setTimeout(this._$shiftBuff, this._wait);\n    }\n  }\n};\n\nvar S$18 = createStream('delay', mixin$11);\nvar P$14 = createProperty('delay', mixin$11);\n\nfunction delay(obs, wait) {\n  return new (obs._ofSameType(S$18, P$14))(obs, { wait: wait });\n}\n\nvar now = Date.now ? function () {\n  return Date.now();\n} : function () {\n  return new Date().getTime();\n};\n\nvar mixin$12 = {\n  _init: function (_ref) {\n    var _this = this;\n\n    var wait = _ref.wait,\n        leading = _ref.leading,\n        trailing = _ref.trailing;\n\n    this._wait = Math.max(0, wait);\n    this._leading = leading;\n    this._trailing = trailing;\n    this._trailingValue = null;\n    this._timeoutId = null;\n    this._endLater = false;\n    this._lastCallTime = 0;\n    this._$trailingCall = function () {\n      return _this._trailingCall();\n    };\n  },\n  _free: function () {\n    this._trailingValue = null;\n    this._$trailingCall = null;\n  },\n  _handleValue: function (x) {\n    if (this._activating) {\n      this._emitValue(x);\n    } else {\n      var curTime = now();\n      if (this._lastCallTime === 0 && !this._leading) {\n        this._lastCallTime = curTime;\n      }\n      var remaining = this._wait - (curTime - this._lastCallTime);\n      if (remaining <= 0) {\n        this._cancelTrailing();\n        this._lastCallTime = curTime;\n        this._emitValue(x);\n      } else if (this._trailing) {\n        this._cancelTrailing();\n        this._trailingValue = x;\n        this._timeoutId = setTimeout(this._$trailingCall, remaining);\n      }\n    }\n  },\n  _handleEnd: function () {\n    if (this._activating) {\n      this._emitEnd();\n    } else {\n      if (this._timeoutId) {\n        this._endLater = true;\n      } else {\n        this._emitEnd();\n      }\n    }\n  },\n  _cancelTrailing: function () {\n    if (this._timeoutId !== null) {\n      clearTimeout(this._timeoutId);\n      this._timeoutId = null;\n    }\n  },\n  _trailingCall: function () {\n    this._emitValue(this._trailingValue);\n    this._timeoutId = null;\n    this._trailingValue = null;\n    this._lastCallTime = !this._leading ? 0 : now();\n    if (this._endLater) {\n      this._emitEnd();\n    }\n  }\n};\n\nvar S$19 = createStream('throttle', mixin$12);\nvar P$15 = createProperty('throttle', mixin$12);\n\nfunction throttle(obs, wait) {\n  var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref2$leading = _ref2.leading,\n      leading = _ref2$leading === undefined ? true : _ref2$leading,\n      _ref2$trailing = _ref2.trailing,\n      trailing = _ref2$trailing === undefined ? true : _ref2$trailing;\n\n  return new (obs._ofSameType(S$19, P$15))(obs, { wait: wait, leading: leading, trailing: trailing });\n}\n\nvar mixin$13 = {\n  _init: function (_ref) {\n    var _this = this;\n\n    var wait = _ref.wait,\n        immediate = _ref.immediate;\n\n    this._wait = Math.max(0, wait);\n    this._immediate = immediate;\n    this._lastAttempt = 0;\n    this._timeoutId = null;\n    this._laterValue = null;\n    this._endLater = false;\n    this._$later = function () {\n      return _this._later();\n    };\n  },\n  _free: function () {\n    this._laterValue = null;\n    this._$later = null;\n  },\n  _handleValue: function (x) {\n    if (this._activating) {\n      this._emitValue(x);\n    } else {\n      this._lastAttempt = now();\n      if (this._immediate && !this._timeoutId) {\n        this._emitValue(x);\n      }\n      if (!this._timeoutId) {\n        this._timeoutId = setTimeout(this._$later, this._wait);\n      }\n      if (!this._immediate) {\n        this._laterValue = x;\n      }\n    }\n  },\n  _handleEnd: function () {\n    if (this._activating) {\n      this._emitEnd();\n    } else {\n      if (this._timeoutId && !this._immediate) {\n        this._endLater = true;\n      } else {\n        this._emitEnd();\n      }\n    }\n  },\n  _later: function () {\n    var last = now() - this._lastAttempt;\n    if (last < this._wait && last >= 0) {\n      this._timeoutId = setTimeout(this._$later, this._wait - last);\n    } else {\n      this._timeoutId = null;\n      if (!this._immediate) {\n        this._emitValue(this._laterValue);\n        this._laterValue = null;\n      }\n      if (this._endLater) {\n        this._emitEnd();\n      }\n    }\n  }\n};\n\nvar S$20 = createStream('debounce', mixin$13);\nvar P$16 = createProperty('debounce', mixin$13);\n\nfunction debounce(obs, wait) {\n  var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref2$immediate = _ref2.immediate,\n      immediate = _ref2$immediate === undefined ? false : _ref2$immediate;\n\n  return new (obs._ofSameType(S$20, P$16))(obs, { wait: wait, immediate: immediate });\n}\n\nvar mixin$14 = {\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._fn = fn;\n  },\n  _free: function () {\n    this._fn = null;\n  },\n  _handleError: function (x) {\n    var fn = this._fn;\n    this._emitError(fn(x));\n  }\n};\n\nvar S$21 = createStream('mapErrors', mixin$14);\nvar P$17 = createProperty('mapErrors', mixin$14);\n\nvar id$5 = function (x) {\n  return x;\n};\n\nfunction mapErrors(obs) {\n  var fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : id$5;\n\n  return new (obs._ofSameType(S$21, P$17))(obs, { fn: fn });\n}\n\nvar mixin$15 = {\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._fn = fn;\n  },\n  _free: function () {\n    this._fn = null;\n  },\n  _handleError: function (x) {\n    var fn = this._fn;\n    if (fn(x)) {\n      this._emitError(x);\n    }\n  }\n};\n\nvar S$22 = createStream('filterErrors', mixin$15);\nvar P$18 = createProperty('filterErrors', mixin$15);\n\nvar id$6 = function (x) {\n  return x;\n};\n\nfunction filterErrors(obs) {\n  var fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : id$6;\n\n  return new (obs._ofSameType(S$22, P$18))(obs, { fn: fn });\n}\n\nvar mixin$16 = {\n  _handleValue: function () {}\n};\n\nvar S$23 = createStream('ignoreValues', mixin$16);\nvar P$19 = createProperty('ignoreValues', mixin$16);\n\nfunction ignoreValues(obs) {\n  return new (obs._ofSameType(S$23, P$19))(obs);\n}\n\nvar mixin$17 = {\n  _handleError: function () {}\n};\n\nvar S$24 = createStream('ignoreErrors', mixin$17);\nvar P$20 = createProperty('ignoreErrors', mixin$17);\n\nfunction ignoreErrors(obs) {\n  return new (obs._ofSameType(S$24, P$20))(obs);\n}\n\nvar mixin$18 = {\n  _handleEnd: function () {}\n};\n\nvar S$25 = createStream('ignoreEnd', mixin$18);\nvar P$21 = createProperty('ignoreEnd', mixin$18);\n\nfunction ignoreEnd(obs) {\n  return new (obs._ofSameType(S$25, P$21))(obs);\n}\n\nvar mixin$19 = {\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._fn = fn;\n  },\n  _free: function () {\n    this._fn = null;\n  },\n  _handleEnd: function () {\n    var fn = this._fn;\n    this._emitValue(fn());\n    this._emitEnd();\n  }\n};\n\nvar S$26 = createStream('beforeEnd', mixin$19);\nvar P$22 = createProperty('beforeEnd', mixin$19);\n\nfunction beforeEnd(obs, fn) {\n  return new (obs._ofSameType(S$26, P$22))(obs, { fn: fn });\n}\n\nvar mixin$20 = {\n  _init: function (_ref) {\n    var min = _ref.min,\n        max = _ref.max;\n\n    this._max = max;\n    this._min = min;\n    this._buff = [];\n  },\n  _free: function () {\n    this._buff = null;\n  },\n  _handleValue: function (x) {\n    this._buff = slide(this._buff, x, this._max);\n    if (this._buff.length >= this._min) {\n      this._emitValue(this._buff);\n    }\n  }\n};\n\nvar S$27 = createStream('slidingWindow', mixin$20);\nvar P$23 = createProperty('slidingWindow', mixin$20);\n\nfunction slidingWindow(obs, max) {\n  var min = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  return new (obs._ofSameType(S$27, P$23))(obs, { min: min, max: max });\n}\n\nvar mixin$21 = {\n  _init: function (_ref) {\n    var fn = _ref.fn,\n        flushOnEnd = _ref.flushOnEnd;\n\n    this._fn = fn;\n    this._flushOnEnd = flushOnEnd;\n    this._buff = [];\n  },\n  _free: function () {\n    this._buff = null;\n  },\n  _flush: function () {\n    if (this._buff !== null && this._buff.length !== 0) {\n      this._emitValue(this._buff);\n      this._buff = [];\n    }\n  },\n  _handleValue: function (x) {\n    this._buff.push(x);\n    var fn = this._fn;\n    if (!fn(x)) {\n      this._flush();\n    }\n  },\n  _handleEnd: function () {\n    if (this._flushOnEnd) {\n      this._flush();\n    }\n    this._emitEnd();\n  }\n};\n\nvar S$28 = createStream('bufferWhile', mixin$21);\nvar P$24 = createProperty('bufferWhile', mixin$21);\n\nvar id$7 = function (x) {\n  return x;\n};\n\nfunction bufferWhile(obs, fn) {\n  var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref2$flushOnEnd = _ref2.flushOnEnd,\n      flushOnEnd = _ref2$flushOnEnd === undefined ? true : _ref2$flushOnEnd;\n\n  return new (obs._ofSameType(S$28, P$24))(obs, { fn: fn || id$7, flushOnEnd: flushOnEnd });\n}\n\nvar mixin$22 = {\n  _init: function (_ref) {\n    var count = _ref.count,\n        flushOnEnd = _ref.flushOnEnd;\n\n    this._count = count;\n    this._flushOnEnd = flushOnEnd;\n    this._buff = [];\n  },\n  _free: function () {\n    this._buff = null;\n  },\n  _flush: function () {\n    if (this._buff !== null && this._buff.length !== 0) {\n      this._emitValue(this._buff);\n      this._buff = [];\n    }\n  },\n  _handleValue: function (x) {\n    this._buff.push(x);\n    if (this._buff.length >= this._count) {\n      this._flush();\n    }\n  },\n  _handleEnd: function () {\n    if (this._flushOnEnd) {\n      this._flush();\n    }\n    this._emitEnd();\n  }\n};\n\nvar S$29 = createStream('bufferWithCount', mixin$22);\nvar P$25 = createProperty('bufferWithCount', mixin$22);\n\nfunction bufferWhile$1(obs, count) {\n  var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref2$flushOnEnd = _ref2.flushOnEnd,\n      flushOnEnd = _ref2$flushOnEnd === undefined ? true : _ref2$flushOnEnd;\n\n  return new (obs._ofSameType(S$29, P$25))(obs, { count: count, flushOnEnd: flushOnEnd });\n}\n\nvar mixin$23 = {\n  _init: function (_ref) {\n    var _this = this;\n\n    var wait = _ref.wait,\n        count = _ref.count,\n        flushOnEnd = _ref.flushOnEnd;\n\n    this._wait = wait;\n    this._count = count;\n    this._flushOnEnd = flushOnEnd;\n    this._intervalId = null;\n    this._$onTick = function () {\n      return _this._flush();\n    };\n    this._buff = [];\n  },\n  _free: function () {\n    this._$onTick = null;\n    this._buff = null;\n  },\n  _flush: function () {\n    if (this._buff !== null) {\n      this._emitValue(this._buff);\n      this._buff = [];\n    }\n  },\n  _handleValue: function (x) {\n    this._buff.push(x);\n    if (this._buff.length >= this._count) {\n      clearInterval(this._intervalId);\n      this._flush();\n      this._intervalId = setInterval(this._$onTick, this._wait);\n    }\n  },\n  _handleEnd: function () {\n    if (this._flushOnEnd && this._buff.length !== 0) {\n      this._flush();\n    }\n    this._emitEnd();\n  },\n  _onActivation: function () {\n    this._intervalId = setInterval(this._$onTick, this._wait);\n    this._source.onAny(this._$handleAny); // copied from patterns/one-source\n  },\n  _onDeactivation: function () {\n    if (this._intervalId !== null) {\n      clearInterval(this._intervalId);\n      this._intervalId = null;\n    }\n    this._source.offAny(this._$handleAny); // copied from patterns/one-source\n  }\n};\n\nvar S$30 = createStream('bufferWithTimeOrCount', mixin$23);\nvar P$26 = createProperty('bufferWithTimeOrCount', mixin$23);\n\nfunction bufferWithTimeOrCount(obs, wait, count) {\n  var _ref2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n      _ref2$flushOnEnd = _ref2.flushOnEnd,\n      flushOnEnd = _ref2$flushOnEnd === undefined ? true : _ref2$flushOnEnd;\n\n  return new (obs._ofSameType(S$30, P$26))(obs, { wait: wait, count: count, flushOnEnd: flushOnEnd });\n}\n\nfunction xformForObs(obs) {\n  return {\n    '@@transducer/step': function (res, input) {\n      obs._emitValue(input);\n      return null;\n    },\n    '@@transducer/result': function () {\n      obs._emitEnd();\n      return null;\n    }\n  };\n}\n\nvar mixin$24 = {\n  _init: function (_ref) {\n    var transducer = _ref.transducer;\n\n    this._xform = transducer(xformForObs(this));\n  },\n  _free: function () {\n    this._xform = null;\n  },\n  _handleValue: function (x) {\n    if (this._xform['@@transducer/step'](null, x) !== null) {\n      this._xform['@@transducer/result'](null);\n    }\n  },\n  _handleEnd: function () {\n    this._xform['@@transducer/result'](null);\n  }\n};\n\nvar S$31 = createStream('transduce', mixin$24);\nvar P$27 = createProperty('transduce', mixin$24);\n\nfunction transduce(obs, transducer) {\n  return new (obs._ofSameType(S$31, P$27))(obs, { transducer: transducer });\n}\n\nvar mixin$25 = {\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._handler = fn;\n    this._emitter = emitter(this);\n  },\n  _free: function () {\n    this._handler = null;\n    this._emitter = null;\n  },\n  _handleAny: function (event) {\n    this._handler(this._emitter, event);\n  }\n};\n\nvar S$32 = createStream('withHandler', mixin$25);\nvar P$28 = createProperty('withHandler', mixin$25);\n\nfunction withHandler(obs, fn) {\n  return new (obs._ofSameType(S$32, P$28))(obs, { fn: fn });\n}\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction Zip(sources, combinator) {\n  var _this = this;\n\n  Stream.call(this);\n\n  this._buffers = map(sources, function (source) {\n    return isArray(source) ? cloneArray(source) : [];\n  });\n  this._sources = map(sources, function (source) {\n    return isArray(source) ? never() : source;\n  });\n\n  this._combinator = combinator ? spread(combinator, this._sources.length) : function (x) {\n    return x;\n  };\n  this._aliveCount = 0;\n\n  this._$handlers = [];\n\n  var _loop = function (i) {\n    _this._$handlers.push(function (event) {\n      return _this._handleAny(i, event);\n    });\n  };\n\n  for (var i = 0; i < this._sources.length; i++) {\n    _loop(i);\n  }\n}\n\ninherit(Zip, Stream, {\n  _name: 'zip',\n\n  _onActivation: function () {\n    // if all sources are arrays\n    while (this._isFull()) {\n      this._emit();\n    }\n\n    var length = this._sources.length;\n    this._aliveCount = length;\n    for (var i = 0; i < length && this._active; i++) {\n      this._sources[i].onAny(this._$handlers[i]);\n    }\n  },\n  _onDeactivation: function () {\n    for (var i = 0; i < this._sources.length; i++) {\n      this._sources[i].offAny(this._$handlers[i]);\n    }\n  },\n  _emit: function () {\n    var values = new Array(this._buffers.length);\n    for (var i = 0; i < this._buffers.length; i++) {\n      values[i] = this._buffers[i].shift();\n    }\n    var combinator = this._combinator;\n    this._emitValue(combinator(values));\n  },\n  _isFull: function () {\n    for (var i = 0; i < this._buffers.length; i++) {\n      if (this._buffers[i].length === 0) {\n        return false;\n      }\n    }\n    return true;\n  },\n  _handleAny: function (i, event) {\n    if (event.type === VALUE) {\n      this._buffers[i].push(event.value);\n      if (this._isFull()) {\n        this._emit();\n      }\n    }\n    if (event.type === ERROR) {\n      this._emitError(event.value);\n    }\n    if (event.type === END) {\n      this._aliveCount--;\n      if (this._aliveCount === 0) {\n        this._emitEnd();\n      }\n    }\n  },\n  _clear: function () {\n    Stream.prototype._clear.call(this);\n    this._sources = null;\n    this._buffers = null;\n    this._combinator = null;\n    this._$handlers = null;\n  }\n});\n\nfunction zip(observables, combinator /* Function | falsey */) {\n  return observables.length === 0 ? never() : new Zip(observables, combinator);\n}\n\nvar id$8 = function (x) {\n  return x;\n};\n\nfunction AbstractPool() {\n  var _this = this;\n\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$queueLim = _ref.queueLim,\n      queueLim = _ref$queueLim === undefined ? 0 : _ref$queueLim,\n      _ref$concurLim = _ref.concurLim,\n      concurLim = _ref$concurLim === undefined ? -1 : _ref$concurLim,\n      _ref$drop = _ref.drop,\n      drop = _ref$drop === undefined ? 'new' : _ref$drop;\n\n  Stream.call(this);\n\n  this._queueLim = queueLim < 0 ? -1 : queueLim;\n  this._concurLim = concurLim < 0 ? -1 : concurLim;\n  this._drop = drop;\n  this._queue = [];\n  this._curSources = [];\n  this._$handleSubAny = function (event) {\n    return _this._handleSubAny(event);\n  };\n  this._$endHandlers = [];\n  this._currentlyAdding = null;\n\n  if (this._concurLim === 0) {\n    this._emitEnd();\n  }\n}\n\ninherit(AbstractPool, Stream, {\n  _name: 'abstractPool',\n\n  _add: function (obj, toObs /* Function | falsey */) {\n    toObs = toObs || id$8;\n    if (this._concurLim === -1 || this._curSources.length < this._concurLim) {\n      this._addToCur(toObs(obj));\n    } else {\n      if (this._queueLim === -1 || this._queue.length < this._queueLim) {\n        this._addToQueue(toObs(obj));\n      } else if (this._drop === 'old') {\n        this._removeOldest();\n        this._add(obj, toObs);\n      }\n    }\n  },\n  _addAll: function (obss) {\n    var _this2 = this;\n\n    forEach(obss, function (obs) {\n      return _this2._add(obs);\n    });\n  },\n  _remove: function (obs) {\n    if (this._removeCur(obs) === -1) {\n      this._removeQueue(obs);\n    }\n  },\n  _addToQueue: function (obs) {\n    this._queue = concat(this._queue, [obs]);\n  },\n  _addToCur: function (obs) {\n    if (this._active) {\n      // HACK:\n      //\n      // We have two optimizations for cases when `obs` is ended. We don't want\n      // to add such observable to the list, but only want to emit events\n      // from it (if it has some).\n      //\n      // Instead of this hacks, we could just did following,\n      // but it would be 5-8 times slower:\n      //\n      //     this._curSources = concat(this._curSources, [obs]);\n      //     this._subscribe(obs);\n      //\n\n      // #1\n      // This one for cases when `obs` already ended\n      // e.g., Kefir.constant() or Kefir.never()\n      if (!obs._alive) {\n        if (obs._currentEvent) {\n          this._emit(obs._currentEvent.type, obs._currentEvent.value);\n        }\n        // The _emit above could have caused this stream to end.\n        if (this._active) {\n          if (this._queue.length !== 0) {\n            this._pullQueue();\n          } else if (this._curSources.length === 0) {\n            this._onEmpty();\n          }\n        }\n        return;\n      }\n\n      // #2\n      // This one is for cases when `obs` going to end synchronously on\n      // first subscriber e.g., Kefir.stream(em => {em.emit(1); em.end()})\n      this._currentlyAdding = obs;\n      obs.onAny(this._$handleSubAny);\n      this._currentlyAdding = null;\n      if (obs._alive) {\n        this._curSources = concat(this._curSources, [obs]);\n        if (this._active) {\n          this._subToEnd(obs);\n        }\n      }\n    } else {\n      this._curSources = concat(this._curSources, [obs]);\n    }\n  },\n  _subToEnd: function (obs) {\n    var _this3 = this;\n\n    var onEnd = function () {\n      return _this3._removeCur(obs);\n    };\n    this._$endHandlers.push({ obs: obs, handler: onEnd });\n    obs.onEnd(onEnd);\n  },\n  _subscribe: function (obs) {\n    obs.onAny(this._$handleSubAny);\n\n    // it can become inactive in responce of subscribing to `obs.onAny` above\n    if (this._active) {\n      this._subToEnd(obs);\n    }\n  },\n  _unsubscribe: function (obs) {\n    obs.offAny(this._$handleSubAny);\n\n    var onEndI = findByPred(this._$endHandlers, function (obj) {\n      return obj.obs === obs;\n    });\n    if (onEndI !== -1) {\n      obs.offEnd(this._$endHandlers[onEndI].handler);\n      this._$endHandlers.splice(onEndI, 1);\n    }\n  },\n  _handleSubAny: function (event) {\n    if (event.type === VALUE) {\n      this._emitValue(event.value);\n    } else if (event.type === ERROR) {\n      this._emitError(event.value);\n    }\n  },\n  _removeQueue: function (obs) {\n    var index = find(this._queue, obs);\n    this._queue = remove(this._queue, index);\n    return index;\n  },\n  _removeCur: function (obs) {\n    if (this._active) {\n      this._unsubscribe(obs);\n    }\n    var index = find(this._curSources, obs);\n    this._curSources = remove(this._curSources, index);\n    if (index !== -1) {\n      if (this._queue.length !== 0) {\n        this._pullQueue();\n      } else if (this._curSources.length === 0) {\n        this._onEmpty();\n      }\n    }\n    return index;\n  },\n  _removeOldest: function () {\n    this._removeCur(this._curSources[0]);\n  },\n  _pullQueue: function () {\n    if (this._queue.length !== 0) {\n      this._queue = cloneArray(this._queue);\n      this._addToCur(this._queue.shift());\n    }\n  },\n  _onActivation: function () {\n    for (var i = 0, sources = this._curSources; i < sources.length && this._active; i++) {\n      this._subscribe(sources[i]);\n    }\n  },\n  _onDeactivation: function () {\n    for (var i = 0, sources = this._curSources; i < sources.length; i++) {\n      this._unsubscribe(sources[i]);\n    }\n    if (this._currentlyAdding !== null) {\n      this._unsubscribe(this._currentlyAdding);\n    }\n  },\n  _isEmpty: function () {\n    return this._curSources.length === 0;\n  },\n  _onEmpty: function () {},\n  _clear: function () {\n    Stream.prototype._clear.call(this);\n    this._queue = null;\n    this._curSources = null;\n    this._$handleSubAny = null;\n    this._$endHandlers = null;\n  }\n});\n\nfunction Merge(sources) {\n  AbstractPool.call(this);\n  this._addAll(sources);\n  this._initialised = true;\n}\n\ninherit(Merge, AbstractPool, {\n  _name: 'merge',\n\n  _onEmpty: function () {\n    if (this._initialised) {\n      this._emitEnd();\n    }\n  }\n});\n\nfunction merge(observables) {\n  return observables.length === 0 ? never() : new Merge(observables);\n}\n\nfunction S$33(generator) {\n  var _this = this;\n\n  Stream.call(this);\n  this._generator = generator;\n  this._source = null;\n  this._inLoop = false;\n  this._iteration = 0;\n  this._$handleAny = function (event) {\n    return _this._handleAny(event);\n  };\n}\n\ninherit(S$33, Stream, {\n  _name: 'repeat',\n\n  _handleAny: function (event) {\n    if (event.type === END) {\n      this._source = null;\n      this._getSource();\n    } else {\n      this._emit(event.type, event.value);\n    }\n  },\n  _getSource: function () {\n    if (!this._inLoop) {\n      this._inLoop = true;\n      var generator = this._generator;\n      while (this._source === null && this._alive && this._active) {\n        this._source = generator(this._iteration++);\n        if (this._source) {\n          this._source.onAny(this._$handleAny);\n        } else {\n          this._emitEnd();\n        }\n      }\n      this._inLoop = false;\n    }\n  },\n  _onActivation: function () {\n    if (this._source) {\n      this._source.onAny(this._$handleAny);\n    } else {\n      this._getSource();\n    }\n  },\n  _onDeactivation: function () {\n    if (this._source) {\n      this._source.offAny(this._$handleAny);\n    }\n  },\n  _clear: function () {\n    Stream.prototype._clear.call(this);\n    this._generator = null;\n    this._source = null;\n    this._$handleAny = null;\n  }\n});\n\nvar repeat = function (generator) {\n  return new S$33(generator);\n};\n\nfunction concat$1(observables) {\n  return repeat(function (index) {\n    return observables.length > index ? observables[index] : false;\n  }).setName('concat');\n}\n\nfunction Pool() {\n  AbstractPool.call(this);\n}\n\ninherit(Pool, AbstractPool, {\n  _name: 'pool',\n\n  plug: function (obs) {\n    this._add(obs);\n    return this;\n  },\n  unplug: function (obs) {\n    this._remove(obs);\n    return this;\n  }\n});\n\nfunction FlatMap(source, fn, options) {\n  var _this = this;\n\n  AbstractPool.call(this, options);\n  this._source = source;\n  this._fn = fn;\n  this._mainEnded = false;\n  this._lastCurrent = null;\n  this._$handleMain = function (event) {\n    return _this._handleMain(event);\n  };\n}\n\ninherit(FlatMap, AbstractPool, {\n  _onActivation: function () {\n    AbstractPool.prototype._onActivation.call(this);\n    if (this._active) {\n      this._source.onAny(this._$handleMain);\n    }\n  },\n  _onDeactivation: function () {\n    AbstractPool.prototype._onDeactivation.call(this);\n    this._source.offAny(this._$handleMain);\n    this._hadNoEvSinceDeact = true;\n  },\n  _handleMain: function (event) {\n    if (event.type === VALUE) {\n      // Is latest value before deactivation survived, and now is 'current' on this activation?\n      // We don't want to handle such values, to prevent to constantly add\n      // same observale on each activation/deactivation when our main source\n      // is a `Kefir.conatant()` for example.\n      var sameCurr = this._activating && this._hadNoEvSinceDeact && this._lastCurrent === event.value;\n      if (!sameCurr) {\n        this._add(event.value, this._fn);\n      }\n      this._lastCurrent = event.value;\n      this._hadNoEvSinceDeact = false;\n    }\n\n    if (event.type === ERROR) {\n      this._emitError(event.value);\n    }\n\n    if (event.type === END) {\n      if (this._isEmpty()) {\n        this._emitEnd();\n      } else {\n        this._mainEnded = true;\n      }\n    }\n  },\n  _onEmpty: function () {\n    if (this._mainEnded) {\n      this._emitEnd();\n    }\n  },\n  _clear: function () {\n    AbstractPool.prototype._clear.call(this);\n    this._source = null;\n    this._lastCurrent = null;\n    this._$handleMain = null;\n  }\n});\n\nfunction FlatMapErrors(source, fn) {\n  FlatMap.call(this, source, fn);\n}\n\ninherit(FlatMapErrors, FlatMap, {\n  // Same as in FlatMap, only VALUE/ERROR flipped\n  _handleMain: function (event) {\n    if (event.type === ERROR) {\n      var sameCurr = this._activating && this._hadNoEvSinceDeact && this._lastCurrent === event.value;\n      if (!sameCurr) {\n        this._add(event.value, this._fn);\n      }\n      this._lastCurrent = event.value;\n      this._hadNoEvSinceDeact = false;\n    }\n\n    if (event.type === VALUE) {\n      this._emitValue(event.value);\n    }\n\n    if (event.type === END) {\n      if (this._isEmpty()) {\n        this._emitEnd();\n      } else {\n        this._mainEnded = true;\n      }\n    }\n  }\n});\n\nfunction createConstructor$1(BaseClass, name) {\n  return function AnonymousObservable(primary, secondary, options) {\n    var _this = this;\n\n    BaseClass.call(this);\n    this._primary = primary;\n    this._secondary = secondary;\n    this._name = primary._name + '.' + name;\n    this._lastSecondary = NOTHING;\n    this._$handleSecondaryAny = function (event) {\n      return _this._handleSecondaryAny(event);\n    };\n    this._$handlePrimaryAny = function (event) {\n      return _this._handlePrimaryAny(event);\n    };\n    this._init(options);\n  };\n}\n\nfunction createClassMethods$1(BaseClass) {\n  return {\n    _init: function () {},\n    _free: function () {},\n    _handlePrimaryValue: function (x) {\n      this._emitValue(x);\n    },\n    _handlePrimaryError: function (x) {\n      this._emitError(x);\n    },\n    _handlePrimaryEnd: function () {\n      this._emitEnd();\n    },\n    _handleSecondaryValue: function (x) {\n      this._lastSecondary = x;\n    },\n    _handleSecondaryError: function (x) {\n      this._emitError(x);\n    },\n    _handleSecondaryEnd: function () {},\n    _handlePrimaryAny: function (event) {\n      switch (event.type) {\n        case VALUE:\n          return this._handlePrimaryValue(event.value);\n        case ERROR:\n          return this._handlePrimaryError(event.value);\n        case END:\n          return this._handlePrimaryEnd(event.value);\n      }\n    },\n    _handleSecondaryAny: function (event) {\n      switch (event.type) {\n        case VALUE:\n          return this._handleSecondaryValue(event.value);\n        case ERROR:\n          return this._handleSecondaryError(event.value);\n        case END:\n          this._handleSecondaryEnd(event.value);\n          this._removeSecondary();\n      }\n    },\n    _removeSecondary: function () {\n      if (this._secondary !== null) {\n        this._secondary.offAny(this._$handleSecondaryAny);\n        this._$handleSecondaryAny = null;\n        this._secondary = null;\n      }\n    },\n    _onActivation: function () {\n      if (this._secondary !== null) {\n        this._secondary.onAny(this._$handleSecondaryAny);\n      }\n      if (this._active) {\n        this._primary.onAny(this._$handlePrimaryAny);\n      }\n    },\n    _onDeactivation: function () {\n      if (this._secondary !== null) {\n        this._secondary.offAny(this._$handleSecondaryAny);\n      }\n      this._primary.offAny(this._$handlePrimaryAny);\n    },\n    _clear: function () {\n      BaseClass.prototype._clear.call(this);\n      this._primary = null;\n      this._secondary = null;\n      this._lastSecondary = null;\n      this._$handleSecondaryAny = null;\n      this._$handlePrimaryAny = null;\n      this._free();\n    }\n  };\n}\n\nfunction createStream$1(name, mixin) {\n  var S = createConstructor$1(Stream, name);\n  inherit(S, Stream, createClassMethods$1(Stream), mixin);\n  return S;\n}\n\nfunction createProperty$1(name, mixin) {\n  var P = createConstructor$1(Property, name);\n  inherit(P, Property, createClassMethods$1(Property), mixin);\n  return P;\n}\n\nvar mixin$26 = {\n  _handlePrimaryValue: function (x) {\n    if (this._lastSecondary !== NOTHING && this._lastSecondary) {\n      this._emitValue(x);\n    }\n  },\n  _handleSecondaryEnd: function () {\n    if (this._lastSecondary === NOTHING || !this._lastSecondary) {\n      this._emitEnd();\n    }\n  }\n};\n\nvar S$34 = createStream$1('filterBy', mixin$26);\nvar P$29 = createProperty$1('filterBy', mixin$26);\n\nfunction filterBy(primary, secondary) {\n  return new (primary._ofSameType(S$34, P$29))(primary, secondary);\n}\n\nvar id2 = function (_, x) {\n  return x;\n};\n\nfunction sampledBy(passive, active, combinator) {\n  var _combinator = combinator ? function (a, b) {\n    return combinator(b, a);\n  } : id2;\n  return combine([active], [passive], _combinator).setName(passive, 'sampledBy');\n}\n\nvar mixin$27 = {\n  _handlePrimaryValue: function (x) {\n    if (this._lastSecondary !== NOTHING) {\n      this._emitValue(x);\n    }\n  },\n  _handleSecondaryEnd: function () {\n    if (this._lastSecondary === NOTHING) {\n      this._emitEnd();\n    }\n  }\n};\n\nvar S$35 = createStream$1('skipUntilBy', mixin$27);\nvar P$30 = createProperty$1('skipUntilBy', mixin$27);\n\nfunction skipUntilBy(primary, secondary) {\n  return new (primary._ofSameType(S$35, P$30))(primary, secondary);\n}\n\nvar mixin$28 = {\n  _handleSecondaryValue: function () {\n    this._emitEnd();\n  }\n};\n\nvar S$36 = createStream$1('takeUntilBy', mixin$28);\nvar P$31 = createProperty$1('takeUntilBy', mixin$28);\n\nfunction takeUntilBy(primary, secondary) {\n  return new (primary._ofSameType(S$36, P$31))(primary, secondary);\n}\n\nvar mixin$29 = {\n  _init: function () {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$flushOnEnd = _ref.flushOnEnd,\n        flushOnEnd = _ref$flushOnEnd === undefined ? true : _ref$flushOnEnd;\n\n    this._buff = [];\n    this._flushOnEnd = flushOnEnd;\n  },\n  _free: function () {\n    this._buff = null;\n  },\n  _flush: function () {\n    if (this._buff !== null) {\n      this._emitValue(this._buff);\n      this._buff = [];\n    }\n  },\n  _handlePrimaryEnd: function () {\n    if (this._flushOnEnd) {\n      this._flush();\n    }\n    this._emitEnd();\n  },\n  _onActivation: function () {\n    this._primary.onAny(this._$handlePrimaryAny);\n    if (this._alive && this._secondary !== null) {\n      this._secondary.onAny(this._$handleSecondaryAny);\n    }\n  },\n  _handlePrimaryValue: function (x) {\n    this._buff.push(x);\n  },\n  _handleSecondaryValue: function () {\n    this._flush();\n  },\n  _handleSecondaryEnd: function () {\n    if (!this._flushOnEnd) {\n      this._emitEnd();\n    }\n  }\n};\n\nvar S$37 = createStream$1('bufferBy', mixin$29);\nvar P$32 = createProperty$1('bufferBy', mixin$29);\n\nfunction bufferBy(primary, secondary, options /* optional */) {\n  return new (primary._ofSameType(S$37, P$32))(primary, secondary, options);\n}\n\nvar mixin$30 = {\n  _init: function () {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$flushOnEnd = _ref.flushOnEnd,\n        flushOnEnd = _ref$flushOnEnd === undefined ? true : _ref$flushOnEnd,\n        _ref$flushOnChange = _ref.flushOnChange,\n        flushOnChange = _ref$flushOnChange === undefined ? false : _ref$flushOnChange;\n\n    this._buff = [];\n    this._flushOnEnd = flushOnEnd;\n    this._flushOnChange = flushOnChange;\n  },\n  _free: function () {\n    this._buff = null;\n  },\n  _flush: function () {\n    if (this._buff !== null) {\n      this._emitValue(this._buff);\n      this._buff = [];\n    }\n  },\n  _handlePrimaryEnd: function () {\n    if (this._flushOnEnd) {\n      this._flush();\n    }\n    this._emitEnd();\n  },\n  _handlePrimaryValue: function (x) {\n    this._buff.push(x);\n    if (this._lastSecondary !== NOTHING && !this._lastSecondary) {\n      this._flush();\n    }\n  },\n  _handleSecondaryEnd: function () {\n    if (!this._flushOnEnd && (this._lastSecondary === NOTHING || this._lastSecondary)) {\n      this._emitEnd();\n    }\n  },\n  _handleSecondaryValue: function (x) {\n    if (this._flushOnChange && !x) {\n      this._flush();\n    }\n\n    // from default _handleSecondaryValue\n    this._lastSecondary = x;\n  }\n};\n\nvar S$38 = createStream$1('bufferWhileBy', mixin$30);\nvar P$33 = createProperty$1('bufferWhileBy', mixin$30);\n\nfunction bufferWhileBy(primary, secondary, options /* optional */) {\n  return new (primary._ofSameType(S$38, P$33))(primary, secondary, options);\n}\n\nvar f = function () {\n  return false;\n};\nvar t = function () {\n  return true;\n};\n\nfunction awaiting(a, b) {\n  var result = merge([map$1(a, t), map$1(b, f)]);\n  result = skipDuplicates(result);\n  result = toProperty(result, f);\n  return result.setName(a, 'awaiting');\n}\n\nvar mixin$31 = {\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._fn = fn;\n  },\n  _free: function () {\n    this._fn = null;\n  },\n  _handleValue: function (x) {\n    var fn = this._fn;\n    var result = fn(x);\n    if (result.convert) {\n      this._emitError(result.error);\n    } else {\n      this._emitValue(x);\n    }\n  }\n};\n\nvar S$39 = createStream('valuesToErrors', mixin$31);\nvar P$34 = createProperty('valuesToErrors', mixin$31);\n\nvar defFn = function (x) {\n  return { convert: true, error: x };\n};\n\nfunction valuesToErrors(obs) {\n  var fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defFn;\n\n  return new (obs._ofSameType(S$39, P$34))(obs, { fn: fn });\n}\n\nvar mixin$32 = {\n  _init: function (_ref) {\n    var fn = _ref.fn;\n\n    this._fn = fn;\n  },\n  _free: function () {\n    this._fn = null;\n  },\n  _handleError: function (x) {\n    var fn = this._fn;\n    var result = fn(x);\n    if (result.convert) {\n      this._emitValue(result.value);\n    } else {\n      this._emitError(x);\n    }\n  }\n};\n\nvar S$40 = createStream('errorsToValues', mixin$32);\nvar P$35 = createProperty('errorsToValues', mixin$32);\n\nvar defFn$1 = function (x) {\n  return { convert: true, value: x };\n};\n\nfunction errorsToValues(obs) {\n  var fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defFn$1;\n\n  return new (obs._ofSameType(S$40, P$35))(obs, { fn: fn });\n}\n\nvar mixin$33 = {\n  _handleError: function (x) {\n    this._emitError(x);\n    this._emitEnd();\n  }\n};\n\nvar S$41 = createStream('endOnError', mixin$33);\nvar P$36 = createProperty('endOnError', mixin$33);\n\nfunction endOnError(obs) {\n  return new (obs._ofSameType(S$41, P$36))(obs);\n}\n\n// Create a stream\n// -----------------------------------------------------------------------------\n\n// () -> Stream\n// (number, any) -> Stream\n// (number, any) -> Stream\n// (number, Array<any>) -> Stream\n// (number, Function) -> Stream\n// (number, Function) -> Stream\n// (Function) -> Stream\n// (Function) -> Stream\n// Target = {addEventListener, removeEventListener}|{addListener, removeListener}|{on, off}\n// (Target, string, Function|undefined) -> Stream\n// (Function) -> Stream\n// Create a property\n// -----------------------------------------------------------------------------\n\n// (any) -> Property\n// (any) -> Property\n// Convert observables\n// -----------------------------------------------------------------------------\n\n// (Stream|Property, Function|undefined) -> Property\nObservable.prototype.toProperty = function (fn) {\n  return toProperty(this, fn);\n};\n\n// (Stream|Property) -> Stream\nObservable.prototype.changes = function () {\n  return changes(this);\n};\n\n// Interoperation with other implimentations\n// -----------------------------------------------------------------------------\n\n// (Promise) -> Property\n// (Stream|Property, Function|undefined) -> Promise\nObservable.prototype.toPromise = function (Promise) {\n  return toPromise(this, Promise);\n};\n\n// (ESObservable) -> Stream\n// (Stream|Property) -> ES7 Observable\nObservable.prototype.toESObservable = toESObservable;\nObservable.prototype[$$observable] = toESObservable;\n\n// Modify an observable\n// -----------------------------------------------------------------------------\n\n// (Stream, Function|undefined) -> Stream\n// (Property, Function|undefined) -> Property\nObservable.prototype.map = function (fn) {\n  return map$1(this, fn);\n};\n\n// (Stream, Function|undefined) -> Stream\n// (Property, Function|undefined) -> Property\nObservable.prototype.filter = function (fn) {\n  return filter(this, fn);\n};\n\n// (Stream, number) -> Stream\n// (Property, number) -> Property\nObservable.prototype.take = function (n) {\n  return take(this, n);\n};\n\n// (Stream, number) -> Stream\n// (Property, number) -> Property\nObservable.prototype.takeErrors = function (n) {\n  return takeErrors(this, n);\n};\n\n// (Stream, Function|undefined) -> Stream\n// (Property, Function|undefined) -> Property\nObservable.prototype.takeWhile = function (fn) {\n  return takeWhile(this, fn);\n};\n\n// (Stream) -> Stream\n// (Property) -> Property\nObservable.prototype.last = function () {\n  return last(this);\n};\n\n// (Stream, number) -> Stream\n// (Property, number) -> Property\nObservable.prototype.skip = function (n) {\n  return skip(this, n);\n};\n\n// (Stream, Function|undefined) -> Stream\n// (Property, Function|undefined) -> Property\nObservable.prototype.skipWhile = function (fn) {\n  return skipWhile(this, fn);\n};\n\n// (Stream, Function|undefined) -> Stream\n// (Property, Function|undefined) -> Property\nObservable.prototype.skipDuplicates = function (fn) {\n  return skipDuplicates(this, fn);\n};\n\n// (Stream, Function|falsey, any|undefined) -> Stream\n// (Property, Function|falsey, any|undefined) -> Property\nObservable.prototype.diff = function (fn, seed) {\n  return diff(this, fn, seed);\n};\n\n// (Stream|Property, Function, any|undefined) -> Property\nObservable.prototype.scan = function (fn, seed) {\n  return scan(this, fn, seed);\n};\n\n// (Stream, Function|undefined) -> Stream\n// (Property, Function|undefined) -> Property\nObservable.prototype.flatten = function (fn) {\n  return flatten(this, fn);\n};\n\n// (Stream, number) -> Stream\n// (Property, number) -> Property\nObservable.prototype.delay = function (wait) {\n  return delay(this, wait);\n};\n\n// Options = {leading: boolean|undefined, trailing: boolean|undefined}\n// (Stream, number, Options|undefined) -> Stream\n// (Property, number, Options|undefined) -> Property\nObservable.prototype.throttle = function (wait, options) {\n  return throttle(this, wait, options);\n};\n\n// Options = {immediate: boolean|undefined}\n// (Stream, number, Options|undefined) -> Stream\n// (Property, number, Options|undefined) -> Property\nObservable.prototype.debounce = function (wait, options) {\n  return debounce(this, wait, options);\n};\n\n// (Stream, Function|undefined) -> Stream\n// (Property, Function|undefined) -> Property\nObservable.prototype.mapErrors = function (fn) {\n  return mapErrors(this, fn);\n};\n\n// (Stream, Function|undefined) -> Stream\n// (Property, Function|undefined) -> Property\nObservable.prototype.filterErrors = function (fn) {\n  return filterErrors(this, fn);\n};\n\n// (Stream) -> Stream\n// (Property) -> Property\nObservable.prototype.ignoreValues = function () {\n  return ignoreValues(this);\n};\n\n// (Stream) -> Stream\n// (Property) -> Property\nObservable.prototype.ignoreErrors = function () {\n  return ignoreErrors(this);\n};\n\n// (Stream) -> Stream\n// (Property) -> Property\nObservable.prototype.ignoreEnd = function () {\n  return ignoreEnd(this);\n};\n\n// (Stream, Function) -> Stream\n// (Property, Function) -> Property\nObservable.prototype.beforeEnd = function (fn) {\n  return beforeEnd(this, fn);\n};\n\n// (Stream, number, number|undefined) -> Stream\n// (Property, number, number|undefined) -> Property\nObservable.prototype.slidingWindow = function (max, min) {\n  return slidingWindow(this, max, min);\n};\n\n// Options = {flushOnEnd: boolean|undefined}\n// (Stream, Function|falsey, Options|undefined) -> Stream\n// (Property, Function|falsey, Options|undefined) -> Property\nObservable.prototype.bufferWhile = function (fn, options) {\n  return bufferWhile(this, fn, options);\n};\n\n// (Stream, number) -> Stream\n// (Property, number) -> Property\nObservable.prototype.bufferWithCount = function (count, options) {\n  return bufferWhile$1(this, count, options);\n};\n\n// Options = {flushOnEnd: boolean|undefined}\n// (Stream, number, number, Options|undefined) -> Stream\n// (Property, number, number, Options|undefined) -> Property\nObservable.prototype.bufferWithTimeOrCount = function (wait, count, options) {\n  return bufferWithTimeOrCount(this, wait, count, options);\n};\n\n// (Stream, Function) -> Stream\n// (Property, Function) -> Property\nObservable.prototype.transduce = function (transducer) {\n  return transduce(this, transducer);\n};\n\n// (Stream, Function) -> Stream\n// (Property, Function) -> Property\nObservable.prototype.withHandler = function (fn) {\n  return withHandler(this, fn);\n};\n\n// (Stream, Stream -> a) -> a\n// (Property, Property -> a) -> a\nObservable.prototype.thru = function (fn) {\n  return fn(this);\n};\n\n// Combine observables\n// -----------------------------------------------------------------------------\n\n// (Array<Stream|Property>, Function|undefiend) -> Stream\n// (Array<Stream|Property>, Array<Stream|Property>, Function|undefiend) -> Stream\nObservable.prototype.combine = function (other, combinator) {\n  return combine([this, other], combinator);\n};\n\n// (Array<Stream|Property>, Function|undefiend) -> Stream\nObservable.prototype.zip = function (other, combinator) {\n  return zip([this, other], combinator);\n};\n\n// (Array<Stream|Property>) -> Stream\nObservable.prototype.merge = function (other) {\n  return merge([this, other]);\n};\n\n// (Array<Stream|Property>) -> Stream\nObservable.prototype.concat = function (other) {\n  return concat$1([this, other]);\n};\n\n// () -> Pool\nvar pool = function () {\n  return new Pool();\n};\n\n// (Function) -> Stream\n// Options = {concurLim: number|undefined, queueLim: number|undefined, drop: 'old'|'new'|undefiend}\n// (Stream|Property, Function|falsey, Options|undefined) -> Stream\nObservable.prototype.flatMap = function (fn) {\n  return new FlatMap(this, fn).setName(this, 'flatMap');\n};\nObservable.prototype.flatMapLatest = function (fn) {\n  return new FlatMap(this, fn, { concurLim: 1, drop: 'old' }).setName(this, 'flatMapLatest');\n};\nObservable.prototype.flatMapFirst = function (fn) {\n  return new FlatMap(this, fn, { concurLim: 1 }).setName(this, 'flatMapFirst');\n};\nObservable.prototype.flatMapConcat = function (fn) {\n  return new FlatMap(this, fn, { queueLim: -1, concurLim: 1 }).setName(this, 'flatMapConcat');\n};\nObservable.prototype.flatMapConcurLimit = function (fn, limit) {\n  return new FlatMap(this, fn, { queueLim: -1, concurLim: limit }).setName(this, 'flatMapConcurLimit');\n};\n\n// (Stream|Property, Function|falsey) -> Stream\nObservable.prototype.flatMapErrors = function (fn) {\n  return new FlatMapErrors(this, fn).setName(this, 'flatMapErrors');\n};\n\n// Combine two observables\n// -----------------------------------------------------------------------------\n\n// (Stream, Stream|Property) -> Stream\n// (Property, Stream|Property) -> Property\nObservable.prototype.filterBy = function (other) {\n  return filterBy(this, other);\n};\n\n// (Stream, Stream|Property, Function|undefiend) -> Stream\n// (Property, Stream|Property, Function|undefiend) -> Property\nObservable.prototype.sampledBy = function (other, combinator) {\n  return sampledBy(this, other, combinator);\n};\n\n// (Stream, Stream|Property) -> Stream\n// (Property, Stream|Property) -> Property\nObservable.prototype.skipUntilBy = function (other) {\n  return skipUntilBy(this, other);\n};\n\n// (Stream, Stream|Property) -> Stream\n// (Property, Stream|Property) -> Property\nObservable.prototype.takeUntilBy = function (other) {\n  return takeUntilBy(this, other);\n};\n\n// Options = {flushOnEnd: boolean|undefined}\n// (Stream, Stream|Property, Options|undefined) -> Stream\n// (Property, Stream|Property, Options|undefined) -> Property\nObservable.prototype.bufferBy = function (other, options) {\n  return bufferBy(this, other, options);\n};\n\n// Options = {flushOnEnd: boolean|undefined}\n// (Stream, Stream|Property, Options|undefined) -> Stream\n// (Property, Stream|Property, Options|undefined) -> Property\nObservable.prototype.bufferWhileBy = function (other, options) {\n  return bufferWhileBy(this, other, options);\n};\n\n// Deprecated\n// -----------------------------------------------------------------------------\n\nvar DEPRECATION_WARNINGS = true;\nfunction dissableDeprecationWarnings() {\n  DEPRECATION_WARNINGS = false;\n}\n\nfunction warn(msg) {\n  if (DEPRECATION_WARNINGS && console && typeof console.warn === 'function') {\n    var msg2 = '\\nHere is an Error object for you containing the call stack:';\n    console.warn(msg, msg2, new Error());\n  }\n}\n\n// (Stream|Property, Stream|Property) -> Property\nObservable.prototype.awaiting = function (other) {\n  warn('You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145');\n  return awaiting(this, other);\n};\n\n// (Stream, Function|undefined) -> Stream\n// (Property, Function|undefined) -> Property\nObservable.prototype.valuesToErrors = function (fn) {\n  warn('You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149');\n  return valuesToErrors(this, fn);\n};\n\n// (Stream, Function|undefined) -> Stream\n// (Property, Function|undefined) -> Property\nObservable.prototype.errorsToValues = function (fn) {\n  warn('You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149');\n  return errorsToValues(this, fn);\n};\n\n// (Stream) -> Stream\n// (Property) -> Property\nObservable.prototype.endOnError = function () {\n  warn('You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150');\n  return endOnError(this);\n};\n\n// Exports\n// --------------------------------------------------------------------------\n\nvar Kefir = {\n  Observable: Observable,\n  Stream: Stream,\n  Property: Property,\n  never: never,\n  later: later,\n  interval: interval,\n  sequentially: sequentially,\n  fromPoll: fromPoll,\n  withInterval: withInterval,\n  fromCallback: fromCallback,\n  fromNodeCallback: fromNodeCallback,\n  fromEvents: fromEvents,\n  stream: stream,\n  constant: constant,\n  constantError: constantError,\n  fromPromise: fromPromise,\n  fromESObservable: fromESObservable,\n  combine: combine,\n  zip: zip,\n  merge: merge,\n  concat: concat$1,\n  Pool: Pool,\n  pool: pool,\n  repeat: repeat,\n  staticLand: staticLand\n};\n\nKefir.Kefir = Kefir;\n\nexports.dissableDeprecationWarnings = dissableDeprecationWarnings;\nexports.Kefir = Kefir;\nexports.Observable = Observable;\nexports.Stream = Stream;\nexports.Property = Property;\nexports.never = never;\nexports.later = later;\nexports.interval = interval;\nexports.sequentially = sequentially;\nexports.fromPoll = fromPoll;\nexports.withInterval = withInterval;\nexports.fromCallback = fromCallback;\nexports.fromNodeCallback = fromNodeCallback;\nexports.fromEvents = fromEvents;\nexports.stream = stream;\nexports.constant = constant;\nexports.constantError = constantError;\nexports.fromPromise = fromPromise;\nexports.fromESObservable = fromESObservable;\nexports.combine = combine;\nexports.zip = zip;\nexports.merge = merge;\nexports.concat = concat$1;\nexports.Pool = Pool;\nexports.pool = pool;\nexports.repeat = repeat;\nexports.staticLand = staticLand;\nexports['default'] = Kefir;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n",";(function() {\n\"use strict\"\nfunction Vnode(tag, key, attrs0, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs0, children: children, text: text, dom: dom, domSize: undefined, state: undefined, _state: undefined, events: undefined, instance: undefined, skip: false}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node != null && typeof node !== \"object\") return Vnode(\"#\", undefined, undefined, node === false ? \"\" : node, undefined, undefined)\n\treturn node\n}\nVnode.normalizeChildren = function normalizeChildren(children) {\n\tfor (var i = 0; i < children.length; i++) {\n\t\tchildren[i] = Vnode.normalize(children[i])\n\t}\n\treturn children\n}\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\nvar hasOwn = {}.hasOwnProperty\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\nfunction execSelector(state, attrs, children) {\n\tvar hasAttrs = false, childList, text\n\tvar className = attrs.className || attrs.class\n\tif (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n\t\tvar newAttrs = {}\n\t\tfor(var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key)) {\n\t\t\t\tnewAttrs[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t\tattrs = newAttrs\n\t}\n\tfor (var key in state.attrs) {\n\t\tif (hasOwn.call(state.attrs, key)) {\n\t\t\tattrs[key] = state.attrs[key]\n\t\t}\n\t}\n\tif (className !== undefined) {\n\t\tif (attrs.class !== undefined) {\n\t\t\tattrs.class = undefined\n\t\t\tattrs.className = className\n\t\t}\n\t\tif (state.attrs.className != null) {\n\t\t\tattrs.className = state.attrs.className + \" \" + className\n\t\t}\n\t}\n\tfor (var key in attrs) {\n\t\tif (hasOwn.call(attrs, key) && key !== \"key\") {\n\t\t\thasAttrs = true\n\t\t\tbreak\n\t\t}\n\t}\n\tif (Array.isArray(children) && children.length === 1 && children[0] != null && children[0].tag === \"#\") {\n\t\ttext = children[0].children\n\t} else {\n\t\tchildList = children\n\t}\n\treturn Vnode(state.tag, attrs.key, hasAttrs ? attrs : undefined, childList, text)\n}\nfunction hyperscript(selector) {\n\t// Because sloppy mode sucks\n\tvar attrs = arguments[1], start = 2, children\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\tif (typeof selector === \"string\") {\n\t\tvar cached = selectorCache[selector] || compileSelector(selector)\n\t}\n\tif (attrs == null) {\n\t\tattrs = {}\n\t} else if (typeof attrs !== \"object\" || attrs.tag != null || Array.isArray(attrs)) {\n\t\tattrs = {}\n\t\tstart = 1\n\t}\n\tif (arguments.length === start + 1) {\n\t\tchildren = arguments[start]\n\t\tif (!Array.isArray(children)) children = [children]\n\t} else {\n\t\tchildren = []\n\t\twhile (start < arguments.length) children.push(arguments[start++])\n\t}\n\tvar normalized = Vnode.normalizeChildren(children)\n\tif (typeof selector === \"string\") {\n\t\treturn execSelector(cached, attrs, normalized)\n\t} else {\n\t\treturn Vnode(selector, attrs.key, attrs, normalized)\n\t}\n}\nhyperscript.trust = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\nhyperscript.fragment = function(attrs1, children) {\n\treturn Vnode(\"[\", attrs1.key, attrs1, Vnode.normalizeChildren(children), undefined, undefined)\n}\nvar m = hyperscript\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n\tif (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n\tif (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\tvar self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n\tvar instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction handler(list, shouldAbsorb) {\n\t\treturn function execute(value) {\n\t\t\tvar then\n\t\t\ttry {\n\t\t\t\tif (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n\t\t\t\t\tif (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n\t\t\t\t\texecuteOnce(then.bind(value))\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) list[i](value)\n\t\t\t\t\t\tresolvers.length = 0, rejectors.length = 0\n\t\t\t\t\t\tinstance.state = shouldAbsorb\n\t\t\t\t\t\tinstance.retry = function() {execute(value)}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\trejectCurrent(e)\n\t\t\t}\n\t\t}\n\t}\n\tfunction executeOnce(then) {\n\t\tvar runs = 0\n\t\tfunction run(fn) {\n\t\t\treturn function(value) {\n\t\t\t\tif (runs++ > 0) return\n\t\t\t\tfn(value)\n\t\t\t}\n\t\t}\n\t\tvar onerror = run(rejectCurrent)\n\t\ttry {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n\t}\n\texecuteOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n\tvar self = this, instance = self._instance\n\tfunction handle(callback, list, next, state) {\n\t\tlist.push(function(value) {\n\t\t\tif (typeof callback !== \"function\") next(value)\n\t\t\telse try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n\t\t})\n\t\tif (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n\t}\n\tvar resolveNext, rejectNext\n\tvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\n\thandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\n\treturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n\treturn this.then(null, onRejection)\n}\nPromisePolyfill.resolve = function(value) {\n\tif (value instanceof PromisePolyfill) return value\n\treturn new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n\treturn new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tvar total = list.length, count = 0, values = []\n\t\tif (list.length === 0) resolve([])\n\t\telse for (var i = 0; i < list.length; i++) {\n\t\t\t(function(i) {\n\t\t\t\tfunction consume(value) {\n\t\t\t\t\tcount++\n\t\t\t\t\tvalues[i] = value\n\t\t\t\t\tif (count === total) resolve(values)\n\t\t\t\t}\n\t\t\t\tif (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n\t\t\t\t\tlist[i].then(consume, reject)\n\t\t\t\t}\n\t\t\t\telse consume(list[i])\n\t\t\t})(i)\n\t\t}\n\t})\n}\nPromisePolyfill.race = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tlist[i].then(resolve, reject)\n\t\t}\n\t})\n}\nif (typeof window !== \"undefined\") {\n\tif (typeof window.Promise === \"undefined\") window.Promise = PromisePolyfill\n\tvar PromisePolyfill = window.Promise\n} else if (typeof global !== \"undefined\") {\n\tif (typeof global.Promise === \"undefined\") global.Promise = PromisePolyfill\n\tvar PromisePolyfill = global.Promise\n} else {\n}\nvar buildQueryString = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\tvar args = []\n\tfor (var key0 in object) {\n\t\tdestructure(key0, object[key0])\n\t}\n\treturn args.join(\"&\")\n\tfunction destructure(key0, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key0 + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key0 + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key0) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\nvar FILE_PROTOCOL_REGEX = new RegExp(\"^file://\", \"i\")\nvar _8 = function($window, Promise) {\n\tvar callbackCount = 0\n\tvar oncompletion\n\tfunction setCompletionCallback(callback) {oncompletion = callback}\n\tfunction finalizer() {\n\t\tvar count = 0\n\t\tfunction complete() {if (--count === 0 && typeof oncompletion === \"function\") oncompletion()}\n\t\treturn function finalize(promise0) {\n\t\t\tvar then0 = promise0.then\n\t\t\tpromise0.then = function() {\n\t\t\t\tcount++\n\t\t\t\tvar next = then0.apply(promise0, arguments)\n\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\tcomplete()\n\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t})\n\t\t\t\treturn finalize(next)\n\t\t\t}\n\t\t\treturn promise0\n\t\t}\n\t}\n\tfunction normalize(args, extra) {\n\t\tif (typeof args === \"string\") {\n\t\t\tvar url = args\n\t\t\targs = extra || {}\n\t\t\tif (args.url == null) args.url = url\n\t\t}\n\t\treturn args\n\t}\n\tfunction request(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\t\tvar promise0 = new Promise(function(resolve, reject) {\n\t\t\tif (args.method == null) args.method = \"GET\"\n\t\t\targs.method = args.method.toUpperCase()\n\t\t\tvar useBody = (args.method === \"GET\" || args.method === \"TRACE\") ? false : (typeof args.useBody === \"boolean\" ? args.useBody : true)\n\t\t\tif (typeof args.serialize !== \"function\") args.serialize = typeof FormData !== \"undefined\" && args.data instanceof FormData ? function(value) {return value} : JSON.stringify\n\t\t\tif (typeof args.deserialize !== \"function\") args.deserialize = deserialize\n\t\t\tif (typeof args.extract !== \"function\") args.extract = extract\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\tif (useBody) args.data = args.serialize(args.data)\n\t\t\telse args.url = assemble(args.url, args.data)\n\t\t\tvar xhr = new $window.XMLHttpRequest(),\n\t\t\t\taborted = false,\n\t\t\t\t_abort = xhr.abort\n\t\t\txhr.abort = function abort() {\n\t\t\t\taborted = true\n\t\t\t\t_abort.call(xhr)\n\t\t\t}\n\t\t\txhr.open(args.method, args.url, typeof args.async === \"boolean\" ? args.async : true, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\t\t\tif (args.serialize === JSON.stringify && useBody && !(args.headers && args.headers.hasOwnProperty(\"Content-Type\"))) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (args.deserialize === deserialize && !(args.headers && args.headers.hasOwnProperty(\"Accept\"))) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tfor (var key in args.headers) if ({}.hasOwnProperty.call(args.headers, key)) {\n\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t}\n\t\t\tif (typeof args.config === \"function\") xhr = args.config(xhr, args) || xhr\n\t\t\txhr.onreadystatechange = function() {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif(aborted) return\n\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar response = (args.extract !== extract) ? args.extract(xhr, args) : args.deserialize(args.extract(xhr, args))\n\t\t\t\t\t\tif ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304 || FILE_PROTOCOL_REGEX.test(args.url)) {\n\t\t\t\t\t\t\tresolve(cast(args.type, response))\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar error = new Error(xhr.responseText)\n\t\t\t\t\t\t\tfor (var key in response) error[key] = response[key]\n\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (useBody && (args.data != null)) xhr.send(args.data)\n\t\t\telse xhr.send()\n\t\t})\n\t\treturn args.background === true ? promise0 : finalize(promise0)\n\t}\n\tfunction jsonp(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\t\tvar promise0 = new Promise(function(resolve, reject) {\n\t\t\tvar callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++\n\t\t\tvar script = $window.document.createElement(\"script\")\n\t\t\t$window[callbackName] = function(data) {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\tresolve(cast(args.type, data))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tscript.onerror = function() {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\treject(new Error(\"JSONP request failed\"))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tif (args.data == null) args.data = {}\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\targs.data[args.callbackKey || \"callback\"] = callbackName\n\t\t\tscript.src = assemble(args.url, args.data)\n\t\t\t$window.document.documentElement.appendChild(script)\n\t\t})\n\t\treturn args.background === true? promise0 : finalize(promise0)\n\t}\n\tfunction interpolate(url, data) {\n\t\tif (data == null) return url\n\t\tvar tokens = url.match(/:[^\\/]+/gi) || []\n\t\tfor (var i = 0; i < tokens.length; i++) {\n\t\t\tvar key = tokens[i].slice(1)\n\t\t\tif (data[key] != null) {\n\t\t\t\turl = url.replace(tokens[i], data[key])\n\t\t\t}\n\t\t}\n\t\treturn url\n\t}\n\tfunction assemble(url, data) {\n\t\tvar querystring = buildQueryString(data)\n\t\tif (querystring !== \"\") {\n\t\t\tvar prefix = url.indexOf(\"?\") < 0 ? \"?\" : \"&\"\n\t\t\turl += prefix + querystring\n\t\t}\n\t\treturn url\n\t}\n\tfunction deserialize(data) {\n\t\ttry {return data !== \"\" ? JSON.parse(data) : null}\n\t\tcatch (e) {throw new Error(data)}\n\t}\n\tfunction extract(xhr) {return xhr.responseText}\n\tfunction cast(type0, data) {\n\t\tif (typeof type0 === \"function\") {\n\t\t\tif (Array.isArray(data)) {\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\tdata[i] = new type0(data[i])\n\t\t\t\t}\n\t\t\t}\n\t\t\telse return new type0(data)\n\t\t}\n\t\treturn data\n\t}\n\treturn {request: request, jsonp: jsonp, setCompletionCallback: setCompletionCallback}\n}\nvar requestService = _8(window, PromisePolyfill)\nvar coreRenderer = function($window) {\n\tvar $doc = $window.document\n\tvar $emptyFragment = $doc.createDocumentFragment()\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\tvar onevent\n\tfunction setEventCallback(callback) {return onevent = callback}\n\tfunction getNameSpace(vnode) {\n\t\treturn vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag]\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode.state = {}\n\t\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": return createText(parent, vnode, nextSibling)\n\t\t\t\tcase \"<\": return createHTML(parent, vnode, nextSibling)\n\t\t\t\tcase \"[\": return createFragment(parent, vnode, hooks, ns, nextSibling)\n\t\t\t\tdefault: return createElement(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse return createComponent(parent, vnode, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode, nextSibling) {\n\t\tvnode.dom = $doc.createTextNode(vnode.children)\n\t\tinsertNode(parent, vnode.dom, nextSibling)\n\t\treturn vnode.dom\n\t}\n\tfunction createHTML(parent, vnode, nextSibling) {\n\t\tvar match1 = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\tvar parent1 = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}[match1[1]] || \"div\"\n\t\tvar temp = $doc.createElement(parent1)\n\t\ttemp.innerHTML = vnode.children\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertNode(parent, fragment, nextSibling)\n\t\treturn fragment\n\t}\n\tfunction createFragment(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodes(fragment, children, 0, children.length, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\tinsertNode(parent, fragment, nextSibling)\n\t\treturn fragment\n\t}\n\tfunction createElement(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tvar attrs2 = vnode.attrs\n\t\tvar is = attrs2 && attrs2.is\n\t\tns = getNameSpace(vnode) || ns\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode.dom = element\n\t\tif (attrs2 != null) {\n\t\t\tsetAttrs(vnode, attrs2, ns)\n\t\t}\n\t\tinsertNode(parent, element, nextSibling)\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse {\n\t\t\tif (vnode.text != null) {\n\t\t\t\tif (vnode.text !== \"\") element.textContent = vnode.text\n\t\t\t\telse vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\t}\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodes(element, children, 0, children.length, hooks, null, ns)\n\t\t\t\tsetLateAttrs(vnode)\n\t\t\t}\n\t\t}\n\t\treturn element\n\t}\n\tfunction initComponent(vnode, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode.tag.view === \"function\") {\n\t\t\tvnode.state = Object.create(vnode.tag)\n\t\t\tsentinel = vnode.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return $emptyFragment\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode.state = void 0\n\t\t\tsentinel = vnode.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return $emptyFragment\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode.state = (vnode.tag.prototype != null && typeof vnode.tag.prototype.view === \"function\") ? new vnode.tag(vnode) : vnode.tag(vnode)\n\t\t}\n\t\tvnode._state = vnode.state\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tinitLifecycle(vnode._state, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(vnode._state.view.call(vnode.state, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tvar element = createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t\tinsertNode(parent, element, nextSibling)\n\t\t\treturn element\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t\treturn $emptyFragment\n\t\t}\n\t}\n\t//update\n\tfunction updateNodes(parent, old, vnodes, recycling, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null) removeNodes(old, 0, old.length, vnodes)\n\t\telse {\n\t\t\tif (old.length === vnodes.length) {\n\t\t\t\tvar isUnkeyed = false\n\t\t\t\tfor (var i = 0; i < vnodes.length; i++) {\n\t\t\t\t\tif (vnodes[i] != null && old[i] != null) {\n\t\t\t\t\t\tisUnkeyed = vnodes[i].key == null && old[i].key == null\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isUnkeyed) {\n\t\t\t\t\tfor (var i = 0; i < old.length; i++) {\n\t\t\t\t\t\tif (old[i] === vnodes[i]) continue\n\t\t\t\t\t\telse if (old[i] == null && vnodes[i] != null) createNode(parent, vnodes[i], hooks, ns, getNextSibling(old, i + 1, nextSibling))\n\t\t\t\t\t\telse if (vnodes[i] == null) removeNodes(old, i, i + 1, vnodes)\n\t\t\t\t\t\telse updateNode(parent, old[i], vnodes[i], hooks, getNextSibling(old, i + 1, nextSibling), recycling, ns)\n\t\t\t\t\t}\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\trecycling = recycling || isRecyclable(old, vnodes)\n\t\t\tif (recycling) {\n\t\t\t\tvar pool = old.pool\n\t\t\t\told = old.concat(old.pool)\n\t\t\t}\n\t\t\tvar oldStart = 0, start = 0, oldEnd = old.length - 1, end = vnodes.length - 1, map\n\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\tvar o = old[oldStart], v = vnodes[start]\n\t\t\t\tif (o === v && !recycling) oldStart++, start++\n\t\t\t\telse if (o == null) oldStart++\n\t\t\t\telse if (v == null) start++\n\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\tvar shouldRecycle = (pool != null && oldStart >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), shouldRecycle, ns)\n\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar o = old[oldEnd]\n\t\t\t\t\tif (o === v && !recycling) oldEnd--, start++\n\t\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\t\telse if (v == null) start++\n\t\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\t\tvar shouldRecycle = (pool != null && oldEnd >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), shouldRecycle, ns)\n\t\t\t\t\t\tif (recycling || start < end) insertNode(parent, toFragment(o), getNextSibling(old, oldStart, nextSibling))\n\t\t\t\t\t\toldEnd--, start++\n\t\t\t\t\t}\n\t\t\t\t\telse break\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\tvar o = old[oldEnd], v = vnodes[end]\n\t\t\t\tif (o === v && !recycling) oldEnd--, end--\n\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\telse if (v == null) end--\n\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\tvar shouldRecycle = (pool != null && oldEnd >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), shouldRecycle, ns)\n\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t\tif (o.dom != null) nextSibling = o.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (!map) map = getKeyMap(old, oldEnd)\n\t\t\t\t\tif (v != null) {\n\t\t\t\t\t\tvar oldIndex = map[v.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tvar movable = old[oldIndex]\n\t\t\t\t\t\t\tvar shouldRecycle = (pool != null && oldIndex >= old.length - pool.length) || ((pool == null) && recycling)\n\t\t\t\t\t\t\tupdateNode(parent, movable, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), recycling, ns)\n\t\t\t\t\t\t\tinsertNode(parent, toFragment(movable), nextSibling)\n\t\t\t\t\t\t\told[oldIndex].skip = true\n\t\t\t\t\t\t\tif (movable.dom != null) nextSibling = movable.dom\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar dom = createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\tnextSibling = dom\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tend--\n\t\t\t\t}\n\t\t\t\tif (end < start) break\n\t\t\t}\n\t\t\tcreateNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\tremoveNodes(old, oldStart, oldEnd + 1, vnodes)\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode._state = old._state\n\t\t\tvnode.events = old.events\n\t\t\tif (!recycling && shouldNotUpdate(vnode, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode.attrs != null) {\n\t\t\t\t\tif (recycling) {\n\t\t\t\t\t\tvnode.state = {}\n\t\t\t\t\t\tinitLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t\t}\n\t\t\t\t\telse updateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, recycling, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, recycling, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(old, null)\n\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\ttoFragment(old)\n\t\t\tcreateHTML(parent, vnode, nextSibling)\n\t\t}\n\t\telse vnode.dom = old.dom, vnode.domSize = old.domSize\n\t}\n\tfunction updateFragment(parent, old, vnode, recycling, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, recycling, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, recycling, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tns = getNameSpace(vnode) || ns\n\t\tif (vnode.tag === \"textarea\") {\n\t\t\tif (vnode.attrs == null) vnode.attrs = {}\n\t\t\tif (vnode.text != null) {\n\t\t\t\tvnode.attrs.value = vnode.text //FIXME handle0 multiple children\n\t\t\t\tvnode.text = undefined\n\t\t\t}\n\t\t}\n\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse if (old.text != null && vnode.text != null && vnode.text !== \"\") {\n\t\t\tif (old.text.toString() !== vnode.text.toString()) old.dom.firstChild.nodeValue = vnode.text\n\t\t}\n\t\telse {\n\t\t\tif (old.text != null) old.children = [Vnode(\"#\", undefined, undefined, old.text, undefined, old.dom.firstChild)]\n\t\t\tif (vnode.text != null) vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\tupdateNodes(element, old.children, vnode.children, recycling, hooks, null, ns)\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tif (recycling) {\n\t\t\tinitComponent(vnode, hooks)\n\t\t} else {\n\t\t\tvnode.instance = Vnode.normalize(vnode._state.view.call(vnode.state, vnode))\n\t\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\t\tif (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tupdateLifecycle(vnode._state, vnode, hooks)\n\t\t}\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, recycling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(old.instance, null)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction isRecyclable(old, vnodes) {\n\t\tif (old.pool != null && Math.abs(old.pool.length - vnodes.length) <= Math.abs(old.length - vnodes.length)) {\n\t\t\tvar oldChildrenLength = old[0] && old[0].children && old[0].children.length || 0\n\t\t\tvar poolChildrenLength = old.pool[0] && old.pool[0].children && old.pool[0].children.length || 0\n\t\t\tvar vnodesChildrenLength = vnodes[0] && vnodes[0].children && vnodes[0].children.length || 0\n\t\t\tif (Math.abs(poolChildrenLength - vnodesChildrenLength) <= Math.abs(oldChildrenLength - vnodesChildrenLength)) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t\treturn false\n\t}\n\tfunction getKeyMap(vnodes, end) {\n\t\tvar map = {}, i = 0\n\t\tfor (var i = 0; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key2 = vnode.key\n\t\t\t\tif (key2 != null) map[key2] = i\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\tfunction toFragment(vnode) {\n\t\tvar count0 = vnode.domSize\n\t\tif (count0 != null || vnode.dom == null) {\n\t\t\tvar fragment = $doc.createDocumentFragment()\n\t\t\tif (count0 > 0) {\n\t\t\t\tvar dom = vnode.dom\n\t\t\t\twhile (--count0) fragment.appendChild(dom.nextSibling)\n\t\t\t\tfragment.insertBefore(dom, fragment.firstChild)\n\t\t\t}\n\t\t\treturn fragment\n\t\t}\n\t\telse return vnode.dom\n\t}\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\tfunction insertNode(parent, dom, nextSibling) {\n\t\tif (nextSibling && nextSibling.parentNode) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\tfunction setContentEditable(vnode) {\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (vnode.text != null || children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted\")\n\t}\n\t//remove\n\tfunction removeNodes(vnodes, start, end, context) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tif (vnode.skip) vnode.skip = false\n\t\t\t\telse removeNode(vnode, context)\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNode(vnode, context) {\n\t\tvar expected = 1, called = 0\n\t\tif (vnode.attrs && typeof vnode.attrs.onbeforeremove === \"function\") {\n\t\t\tvar result = vnode.attrs.onbeforeremove.call(vnode.state, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode._state.onbeforeremove === \"function\") {\n\t\t\tvar result = vnode._state.onbeforeremove.call(vnode.state, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\texpected++\n\t\t\t\tresult.then(continuation, continuation)\n\t\t\t}\n\t\t}\n\t\tcontinuation()\n\t\tfunction continuation() {\n\t\t\tif (++called === expected) {\n\t\t\t\tonremove(vnode)\n\t\t\t\tif (vnode.dom) {\n\t\t\t\t\tvar count0 = vnode.domSize || 1\n\t\t\t\t\tif (count0 > 1) {\n\t\t\t\t\t\tvar dom = vnode.dom\n\t\t\t\t\t\twhile (--count0) {\n\t\t\t\t\t\t\tremoveNodeFromDOM(dom.nextSibling)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tremoveNodeFromDOM(vnode.dom)\n\t\t\t\t\tif (context != null && vnode.domSize == null && !hasIntegrationMethods(vnode.attrs) && typeof vnode.tag === \"string\") { //TODO test custom elements\n\t\t\t\t\t\tif (!context.pool) context.pool = [vnode]\n\t\t\t\t\t\telse context.pool.push(vnode)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNodeFromDOM(node) {\n\t\tvar parent = node.parentNode\n\t\tif (parent != null) parent.removeChild(node)\n\t}\n\tfunction onremove(vnode) {\n\t\tif (vnode.attrs && typeof vnode.attrs.onremove === \"function\") vnode.attrs.onremove.call(vnode.state, vnode)\n\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\tif (typeof vnode._state.onremove === \"function\") vnode._state.onremove.call(vnode.state, vnode)\n\t\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\t} else {\n\t\t\tvar children = vnode.children\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//attrs2\n\tfunction setAttrs(vnode, attrs2, ns) {\n\t\tfor (var key2 in attrs2) {\n\t\t\tsetAttr(vnode, key2, null, attrs2[key2], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key2, old, value, ns) {\n\t\tvar element = vnode.dom\n\t\tif (key2 === \"key\" || key2 === \"is\" || (old === value && !isFormAttribute(vnode, key2)) && typeof value !== \"object\" || typeof value === \"undefined\" || isLifecycleMethod(key2)) return\n\t\tvar nsLastIndex = key2.indexOf(\":\")\n\t\tif (nsLastIndex > -1 && key2.substr(0, nsLastIndex) === \"xlink\") {\n\t\t\telement.setAttributeNS(\"http://www.w3.org/1999/xlink\", key2.slice(nsLastIndex + 1), value)\n\t\t}\n\t\telse if (key2[0] === \"o\" && key2[1] === \"n\" && typeof value === \"function\") updateEvent(vnode, key2, value)\n\t\telse if (key2 === \"style\") updateStyle(element, old, value)\n\t\telse if (key2 in element && !isAttribute(key2) && ns === undefined && !isCustomElement(vnode)) {\n\t\t\tif (key2 === \"value\") {\n\t\t\t\tvar normalized0 = \"\" + value // eslint-disable-line no-implicit-coercion\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\tif ((vnode.tag === \"input\" || vnode.tag === \"textarea\") && vnode.dom.value === normalized0 && vnode.dom === $doc.activeElement) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"select\") {\n\t\t\t\t\tif (value === null) {\n\t\t\t\t\t\tif (vnode.dom.selectedIndex === -1 && vnode.dom === $doc.activeElement) return\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (old !== null && vnode.dom.value === normalized0 && vnode.dom === $doc.activeElement) return\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"option\" && old != null && vnode.dom.value === normalized0) return\n\t\t\t}\n\t\t\t// If you assign an input type1 that is not supported by IE 11 with an assignment expression, an error0 will occur.\n\t\t\tif (vnode.tag === \"input\" && key2 === \"type\") {\n\t\t\t\telement.setAttribute(key2, value)\n\t\t\t\treturn\n\t\t\t}\n\t\t\telement[key2] = value\n\t\t}\n\t\telse {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) element.setAttribute(key2, \"\")\n\t\t\t\telse element.removeAttribute(key2)\n\t\t\t}\n\t\t\telse element.setAttribute(key2 === \"className\" ? \"class\" : key2, value)\n\t\t}\n\t}\n\tfunction setLateAttrs(vnode) {\n\t\tvar attrs2 = vnode.attrs\n\t\tif (vnode.tag === \"select\" && attrs2 != null) {\n\t\t\tif (\"value\" in attrs2) setAttr(vnode, \"value\", null, attrs2.value, undefined)\n\t\t\tif (\"selectedIndex\" in attrs2) setAttr(vnode, \"selectedIndex\", null, attrs2.selectedIndex, undefined)\n\t\t}\n\t}\n\tfunction updateAttrs(vnode, old, attrs2, ns) {\n\t\tif (attrs2 != null) {\n\t\t\tfor (var key2 in attrs2) {\n\t\t\t\tsetAttr(vnode, key2, old && old[key2], attrs2[key2], ns)\n\t\t\t}\n\t\t}\n\t\tif (old != null) {\n\t\t\tfor (var key2 in old) {\n\t\t\t\tif (attrs2 == null || !(key2 in attrs2)) {\n\t\t\t\t\tif (key2 === \"className\") key2 = \"class\"\n\t\t\t\t\tif (key2[0] === \"o\" && key2[1] === \"n\" && !isLifecycleMethod(key2)) updateEvent(vnode, key2, undefined)\n\t\t\t\t\telse if (key2 !== \"key\") vnode.dom.removeAttribute(key2)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode.dom === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction isAttribute(attr) {\n\t\treturn attr === \"href\" || attr === \"list\" || attr === \"form\" || attr === \"width\" || attr === \"height\"// || attr === \"type\"\n\t}\n\tfunction isCustomElement(vnode){\n\t\treturn vnode.attrs.is || vnode.tag.indexOf(\"-\") > -1\n\t}\n\tfunction hasIntegrationMethods(source) {\n\t\treturn source != null && (source.oncreate || source.onupdate || source.onbeforeremove || source.onremove)\n\t}\n\t//style\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) element.style.cssText = \"\", old = null\n\t\tif (style == null) element.style.cssText = \"\"\n\t\telse if (typeof style === \"string\") element.style.cssText = style\n\t\telse {\n\t\t\tif (typeof old === \"string\") element.style.cssText = \"\"\n\t\t\tfor (var key2 in style) {\n\t\t\t\telement.style[key2] = style[key2]\n\t\t\t}\n\t\t\tif (old != null && typeof old !== \"string\") {\n\t\t\t\tfor (var key2 in old) {\n\t\t\t\t\tif (!(key2 in style)) element.style[key2] = \"\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//event\n\tfunction updateEvent(vnode, key2, value) {\n\t\tvar element = vnode.dom\n\t\tvar callback = typeof onevent !== \"function\" ? value : function(e) {\n\t\t\tvar result = value.call(element, e)\n\t\t\tonevent.call(element, e)\n\t\t\treturn result\n\t\t}\n\t\tif (key2 in element) element[key2] = typeof value === \"function\" ? callback : null\n\t\telse {\n\t\t\tvar eventName = key2.slice(2)\n\t\t\tif (vnode.events === undefined) vnode.events = {}\n\t\t\tif (vnode.events[key2] === callback) return\n\t\t\tif (vnode.events[key2] != null) element.removeEventListener(eventName, vnode.events[key2], false)\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\tvnode.events[key2] = callback\n\t\t\t\telement.addEventListener(eventName, vnode.events[key2], false)\n\t\t\t}\n\t\t}\n\t}\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") source.oninit.call(vnode.state, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(source.oncreate.bind(vnode.state, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(source.onupdate.bind(vnode.state, vnode))\n\t}\n\tfunction shouldNotUpdate(vnode, old) {\n\t\tvar forceVnodeUpdate, forceComponentUpdate\n\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") forceVnodeUpdate = vnode.attrs.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode._state.onbeforeupdate === \"function\") forceComponentUpdate = vnode._state.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (!(forceVnodeUpdate === undefined && forceComponentUpdate === undefined) && !forceVnodeUpdate && !forceComponentUpdate) {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t\tvnode.instance = old.instance\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\tfunction render(dom, vnodes) {\n\t\tif (!dom) throw new Error(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\")\n\t\tvar hooks = []\n\t\tvar active = $doc.activeElement\n\t\tvar namespace = dom.namespaceURI\n\t\t// First time0 rendering into a node clears it out\n\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\tif (!Array.isArray(vnodes)) vnodes = [vnodes]\n\t\tupdateNodes(dom, dom.vnodes, Vnode.normalizeChildren(vnodes), false, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\tdom.vnodes = vnodes\n\t\t// document.activeElement can return null in IE https://developer.mozilla.org/en-US/docs/Web/API/Document/activeElement\n\t\tif (active != null && $doc.activeElement !== active) active.focus()\n\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t}\n\treturn {render: render, setEventCallback: setEventCallback}\n}\nfunction throttle(callback) {\n\t//60fps translates to 16.6ms, round it down since setTimeout requires int\n\tvar time = 16\n\tvar last = 0, pending = null\n\tvar timeout = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : setTimeout\n\treturn function() {\n\t\tvar now = Date.now()\n\t\tif (last === 0 || now - last >= time) {\n\t\t\tlast = now\n\t\t\tcallback()\n\t\t}\n\t\telse if (pending === null) {\n\t\t\tpending = timeout(function() {\n\t\t\t\tpending = null\n\t\t\t\tcallback()\n\t\t\t\tlast = Date.now()\n\t\t\t}, time - (now - last))\n\t\t}\n\t}\n}\nvar _11 = function($window) {\n\tvar renderService = coreRenderer($window)\n\trenderService.setEventCallback(function(e) {\n\t\tif (e.redraw === false) e.redraw = undefined\n\t\telse redraw()\n\t})\n\tvar callbacks = []\n\tfunction subscribe(key1, callback) {\n\t\tunsubscribe(key1)\n\t\tcallbacks.push(key1, throttle(callback))\n\t}\n\tfunction unsubscribe(key1) {\n\t\tvar index = callbacks.indexOf(key1)\n\t\tif (index > -1) callbacks.splice(index, 2)\n\t}\n\tfunction redraw() {\n\t\tfor (var i = 1; i < callbacks.length; i += 2) {\n\t\t\tcallbacks[i]()\n\t\t}\n\t}\n\treturn {subscribe: subscribe, unsubscribe: unsubscribe, redraw: redraw, render: renderService.render}\n}\nvar redrawService = _11(window)\nrequestService.setCompletionCallback(redrawService.redraw)\nvar _16 = function(redrawService0) {\n\treturn function(root, component) {\n\t\tif (component === null) {\n\t\t\tredrawService0.render(root, [])\n\t\t\tredrawService0.unsubscribe(root)\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif (component.view == null && typeof component !== \"function\") throw new Error(\"m.mount(element, component) expects a component, not a vnode\")\n\t\t\n\t\tvar run0 = function() {\n\t\t\tredrawService0.render(root, Vnode(component))\n\t\t}\n\t\tredrawService0.subscribe(root, run0)\n\t\tredrawService0.redraw()\n\t}\n}\nm.mount = _16(redrawService)\nvar Promise = PromisePolyfill\nvar parseQueryString = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\tvar entries = string.split(\"&\"), data0 = {}, counters = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key5 = decodeURIComponent(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\"\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\t\tvar levels = key5.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data0\n\t\tif (key5.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tvar isValue = j === levels.length - 1\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key5 = levels.slice(0, j).join()\n\t\t\t\tif (counters[key5] == null) counters[key5] = 0\n\t\t\t\tlevel = counters[key5]++\n\t\t\t}\n\t\t\tif (cursor[level] == null) {\n\t\t\t\tcursor[level] = isValue ? value : isNumber ? [] : {}\n\t\t\t}\n\t\t\tcursor = cursor[level]\n\t\t}\n\t}\n\treturn data0\n}\nvar coreRouter = function($window) {\n\tvar supportsPushState = typeof $window.history.pushState === \"function\"\n\tvar callAsync0 = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction normalize1(fragment0) {\n\t\tvar data = $window.location[fragment0].replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent)\n\t\tif (fragment0 === \"pathname\" && data[0] !== \"/\") data = \"/\" + data\n\t\treturn data\n\t}\n\tvar asyncId\n\tfunction debounceAsync(callback0) {\n\t\treturn function() {\n\t\t\tif (asyncId != null) return\n\t\t\tasyncId = callAsync0(function() {\n\t\t\t\tasyncId = null\n\t\t\t\tcallback0()\n\t\t\t})\n\t\t}\n\t}\n\tfunction parsePath(path, queryData, hashData) {\n\t\tvar queryIndex = path.indexOf(\"?\")\n\t\tvar hashIndex = path.indexOf(\"#\")\n\t\tvar pathEnd = queryIndex > -1 ? queryIndex : hashIndex > -1 ? hashIndex : path.length\n\t\tif (queryIndex > -1) {\n\t\t\tvar queryEnd = hashIndex > -1 ? hashIndex : path.length\n\t\t\tvar queryParams = parseQueryString(path.slice(queryIndex + 1, queryEnd))\n\t\t\tfor (var key4 in queryParams) queryData[key4] = queryParams[key4]\n\t\t}\n\t\tif (hashIndex > -1) {\n\t\t\tvar hashParams = parseQueryString(path.slice(hashIndex + 1))\n\t\t\tfor (var key4 in hashParams) hashData[key4] = hashParams[key4]\n\t\t}\n\t\treturn path.slice(0, pathEnd)\n\t}\n\tvar router = {prefix: \"#!\"}\n\trouter.getPath = function() {\n\t\tvar type2 = router.prefix.charAt(0)\n\t\tswitch (type2) {\n\t\t\tcase \"#\": return normalize1(\"hash\").slice(router.prefix.length)\n\t\t\tcase \"?\": return normalize1(\"search\").slice(router.prefix.length) + normalize1(\"hash\")\n\t\t\tdefault: return normalize1(\"pathname\").slice(router.prefix.length) + normalize1(\"search\") + normalize1(\"hash\")\n\t\t}\n\t}\n\trouter.setPath = function(path, data, options) {\n\t\tvar queryData = {}, hashData = {}\n\t\tpath = parsePath(path, queryData, hashData)\n\t\tif (data != null) {\n\t\t\tfor (var key4 in data) queryData[key4] = data[key4]\n\t\t\tpath = path.replace(/:([^\\/]+)/g, function(match2, token) {\n\t\t\t\tdelete queryData[token]\n\t\t\t\treturn data[token]\n\t\t\t})\n\t\t}\n\t\tvar query = buildQueryString(queryData)\n\t\tif (query) path += \"?\" + query\n\t\tvar hash = buildQueryString(hashData)\n\t\tif (hash) path += \"#\" + hash\n\t\tif (supportsPushState) {\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\t$window.onpopstate()\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, router.prefix + path)\n\t\t\telse $window.history.pushState(state, title, router.prefix + path)\n\t\t}\n\t\telse $window.location.href = router.prefix + path\n\t}\n\trouter.defineRoutes = function(routes, resolve, reject) {\n\t\tfunction resolveRoute() {\n\t\t\tvar path = router.getPath()\n\t\t\tvar params = {}\n\t\t\tvar pathname = parsePath(path, params, params)\n\t\t\tvar state = $window.history.state\n\t\t\tif (state != null) {\n\t\t\t\tfor (var k in state) params[k] = state[k]\n\t\t\t}\n\t\t\tfor (var route0 in routes) {\n\t\t\t\tvar matcher = new RegExp(\"^\" + route0.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\").replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\")\n\t\t\t\tif (matcher.test(pathname)) {\n\t\t\t\t\tpathname.replace(matcher, function() {\n\t\t\t\t\t\tvar keys = route0.match(/:[^\\/]+/g) || []\n\t\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2)\n\t\t\t\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\t\t\t\tparams[keys[i].replace(/:|\\./g, \"\")] = decodeURIComponent(values[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(routes[route0], params, path, route0)\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\t\t\treject(path, params)\n\t\t}\n\t\tif (supportsPushState) $window.onpopstate = debounceAsync(resolveRoute)\n\t\telse if (router.prefix.charAt(0) === \"#\") $window.onhashchange = resolveRoute\n\t\tresolveRoute()\n\t}\n\treturn router\n}\nvar _20 = function($window, redrawService0) {\n\tvar routeService = coreRouter($window)\n\tvar identity = function(v) {return v}\n\tvar render1, component, attrs3, currentPath, lastUpdate\n\tvar route = function(root, defaultRoute, routes) {\n\t\tif (root == null) throw new Error(\"Ensure the DOM element that was passed to `m.route` is not undefined\")\n\t\tvar run1 = function() {\n\t\t\tif (render1 != null) redrawService0.render(root, render1(Vnode(component, attrs3.key, attrs3)))\n\t\t}\n\t\tvar bail = function(path) {\n\t\t\tif (path !== defaultRoute) routeService.setPath(defaultRoute, null, {replace: true})\n\t\t\telse throw new Error(\"Could not resolve default route \" + defaultRoute)\n\t\t}\n\t\trouteService.defineRoutes(routes, function(payload, params, path) {\n\t\t\tvar update = lastUpdate = function(routeResolver, comp) {\n\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\tattrs3 = params, currentPath = path, lastUpdate = null\n\t\t\t\trender1 = (routeResolver.render || identity).bind(routeResolver)\n\t\t\t\trun1()\n\t\t\t}\n\t\t\tif (payload.view || typeof payload === \"function\") update({}, payload)\n\t\t\telse {\n\t\t\t\tif (payload.onmatch) {\n\t\t\t\t\tPromise.resolve(payload.onmatch(params, path)).then(function(resolved) {\n\t\t\t\t\t\tupdate(payload, resolved)\n\t\t\t\t\t}, bail)\n\t\t\t\t}\n\t\t\t\telse update(payload, \"div\")\n\t\t\t}\n\t\t}, bail)\n\t\tredrawService0.subscribe(root, run1)\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\t\trouteService.setPath(path, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = function(prefix0) {routeService.prefix = prefix0}\n\troute.link = function(vnode1) {\n\t\tvnode1.dom.setAttribute(\"href\", routeService.prefix + vnode1.attrs.href)\n\t\tvnode1.dom.onclick = function(e) {\n\t\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\n\t\t\te.preventDefault()\n\t\t\te.redraw = false\n\t\t\tvar href = this.getAttribute(\"href\")\n\t\t\tif (href.indexOf(routeService.prefix) === 0) href = href.slice(routeService.prefix.length)\n\t\t\troute.set(href, undefined, undefined)\n\t\t}\n\t}\n\troute.param = function(key3) {\n\t\tif(typeof attrs3 !== \"undefined\" && typeof key3 !== \"undefined\") return attrs3[key3]\n\t\treturn attrs3\n\t}\n\treturn route\n}\nm.route = _20(window, redrawService)\nm.withAttr = function(attrName, callback1, context) {\n\treturn function(e) {\n\t\tcallback1.call(context || this, attrName in e.currentTarget ? e.currentTarget[attrName] : e.currentTarget.getAttribute(attrName))\n\t}\n}\nvar _28 = coreRenderer(window)\nm.render = _28.render\nm.redraw = redrawService.redraw\nm.request = requestService.request\nm.jsonp = requestService.jsonp\nm.parseQueryString = parseQueryString\nm.buildQueryString = buildQueryString\nm.version = \"1.1.6\"\nm.vnode = Vnode\nif (typeof module !== \"undefined\") module[\"exports\"] = m\nelse window.m = m\n}());","export default function _isPlaceholder(a) {\n       return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;\n}","import _isPlaceholder from './_isPlaceholder.js';\n\n/**\n * Optimized internal one-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curry1(fn) {\n  return function f1(a) {\n    if (arguments.length === 0 || _isPlaceholder(a)) {\n      return f1;\n    } else {\n      return fn.apply(this, arguments);\n    }\n  };\n}","import _curry1 from './_curry1.js';\nimport _isPlaceholder from './_isPlaceholder.js';\n\n/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curry2(fn) {\n  return function f2(a, b) {\n    switch (arguments.length) {\n      case 0:\n        return f2;\n      case 1:\n        return _isPlaceholder(a) ? f2 : _curry1(function (_b) {\n          return fn(a, _b);\n        });\n      default:\n        return _isPlaceholder(a) && _isPlaceholder(b) ? f2 : _isPlaceholder(a) ? _curry1(function (_a) {\n          return fn(_a, b);\n        }) : _isPlaceholder(b) ? _curry1(function (_b) {\n          return fn(a, _b);\n        }) : fn(a, b);\n    }\n  };\n}","export default function _arity(n, fn) {\n  /* eslint-disable no-unused-vars */\n  switch (n) {\n    case 0:\n      return function () {\n        return fn.apply(this, arguments);\n      };\n    case 1:\n      return function (a0) {\n        return fn.apply(this, arguments);\n      };\n    case 2:\n      return function (a0, a1) {\n        return fn.apply(this, arguments);\n      };\n    case 3:\n      return function (a0, a1, a2) {\n        return fn.apply(this, arguments);\n      };\n    case 4:\n      return function (a0, a1, a2, a3) {\n        return fn.apply(this, arguments);\n      };\n    case 5:\n      return function (a0, a1, a2, a3, a4) {\n        return fn.apply(this, arguments);\n      };\n    case 6:\n      return function (a0, a1, a2, a3, a4, a5) {\n        return fn.apply(this, arguments);\n      };\n    case 7:\n      return function (a0, a1, a2, a3, a4, a5, a6) {\n        return fn.apply(this, arguments);\n      };\n    case 8:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        return fn.apply(this, arguments);\n      };\n    case 9:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        return fn.apply(this, arguments);\n      };\n    case 10:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {\n        return fn.apply(this, arguments);\n      };\n    default:\n      throw new Error('First argument to _arity must be a non-negative integer no greater than ten');\n  }\n}","import _arity from './_arity.js';\nimport _isPlaceholder from './_isPlaceholder.js';\n\n/**\n * Internal curryN function.\n *\n * @private\n * @category Function\n * @param {Number} length The arity of the curried function.\n * @param {Array} received An array of arguments received thus far.\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curryN(length, received, fn) {\n  return function () {\n    var combined = [];\n    var argsIdx = 0;\n    var left = length;\n    var combinedIdx = 0;\n    while (combinedIdx < received.length || argsIdx < arguments.length) {\n      var result;\n      if (combinedIdx < received.length && (!_isPlaceholder(received[combinedIdx]) || argsIdx >= arguments.length)) {\n        result = received[combinedIdx];\n      } else {\n        result = arguments[argsIdx];\n        argsIdx += 1;\n      }\n      combined[combinedIdx] = result;\n      if (!_isPlaceholder(result)) {\n        left -= 1;\n      }\n      combinedIdx += 1;\n    }\n    return left <= 0 ? fn.apply(this, combined) : _arity(left, _curryN(length, combined, fn));\n  };\n}","import _arity from './internal/_arity.js';\nimport _curry1 from './internal/_curry1.js';\nimport _curry2 from './internal/_curry2.js';\nimport _curryN from './internal/_curryN.js';\n\n/**\n * Returns a curried equivalent of the provided function, with the specified\n * arity. The curried function has two unusual capabilities. First, its\n * arguments needn't be provided one at a time. If `g` is `R.curryN(3, f)`, the\n * following are equivalent:\n *\n *   - `g(1)(2)(3)`\n *   - `g(1)(2, 3)`\n *   - `g(1, 2)(3)`\n *   - `g(1, 2, 3)`\n *\n * Secondly, the special placeholder value [`R.__`](#__) may be used to specify\n * \"gaps\", allowing partial application of any combination of arguments,\n * regardless of their positions. If `g` is as above and `_` is [`R.__`](#__),\n * the following are equivalent:\n *\n *   - `g(1, 2, 3)`\n *   - `g(_, 2, 3)(1)`\n *   - `g(_, _, 3)(1)(2)`\n *   - `g(_, _, 3)(1, 2)`\n *   - `g(_, 2)(1)(3)`\n *   - `g(_, 2)(1, 3)`\n *   - `g(_, 2)(_, 3)(1)`\n *\n * @func\n * @memberOf R\n * @since v0.5.0\n * @category Function\n * @sig Number -> (* -> a) -> (* -> a)\n * @param {Number} length The arity for the returned function.\n * @param {Function} fn The function to curry.\n * @return {Function} A new, curried function.\n * @see R.curry\n * @example\n *\n *      const sumArgs = (...args) => R.sum(args);\n *\n *      const curriedAddFourNumbers = R.curryN(4, sumArgs);\n *      const f = curriedAddFourNumbers(1, 2);\n *      const g = f(3);\n *      g(4); //=> 10\n */\nvar curryN = /*#__PURE__*/_curry2(function curryN(length, fn) {\n  if (length === 1) {\n    return _curry1(fn);\n  }\n  return _arity(length, _curryN(length, [], fn));\n});\nexport default curryN;","import _curry1 from './_curry1.js';\nimport _curry2 from './_curry2.js';\nimport _isPlaceholder from './_isPlaceholder.js';\n\n/**\n * Optimized internal three-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curry3(fn) {\n  return function f3(a, b, c) {\n    switch (arguments.length) {\n      case 0:\n        return f3;\n      case 1:\n        return _isPlaceholder(a) ? f3 : _curry2(function (_b, _c) {\n          return fn(a, _b, _c);\n        });\n      case 2:\n        return _isPlaceholder(a) && _isPlaceholder(b) ? f3 : _isPlaceholder(a) ? _curry2(function (_a, _c) {\n          return fn(_a, b, _c);\n        }) : _isPlaceholder(b) ? _curry2(function (_b, _c) {\n          return fn(a, _b, _c);\n        }) : _curry1(function (_c) {\n          return fn(a, b, _c);\n        });\n      default:\n        return _isPlaceholder(a) && _isPlaceholder(b) && _isPlaceholder(c) ? f3 : _isPlaceholder(a) && _isPlaceholder(b) ? _curry2(function (_a, _b) {\n          return fn(_a, _b, c);\n        }) : _isPlaceholder(a) && _isPlaceholder(c) ? _curry2(function (_a, _c) {\n          return fn(_a, b, _c);\n        }) : _isPlaceholder(b) && _isPlaceholder(c) ? _curry2(function (_b, _c) {\n          return fn(a, _b, _c);\n        }) : _isPlaceholder(a) ? _curry1(function (_a) {\n          return fn(_a, b, c);\n        }) : _isPlaceholder(b) ? _curry1(function (_b) {\n          return fn(a, _b, c);\n        }) : _isPlaceholder(c) ? _curry1(function (_c) {\n          return fn(a, b, _c);\n        }) : fn(a, b, c);\n    }\n  };\n}","/**\n * Tests whether or not an object is an array.\n *\n * @private\n * @param {*} val The object to test.\n * @return {Boolean} `true` if `val` is an array, `false` otherwise.\n * @example\n *\n *      _isArray([]); //=> true\n *      _isArray(null); //=> false\n *      _isArray({}); //=> false\n */\nexport default Array.isArray || function _isArray(val) {\n  return val != null && val.length >= 0 && Object.prototype.toString.call(val) === '[object Array]';\n};","import _isArray from './_isArray.js';\nimport _isTransformer from './_isTransformer.js';\n\n/**\n * Returns a function that dispatches with different strategies based on the\n * object in list position (last argument). If it is an array, executes [fn].\n * Otherwise, if it has a function with one of the given method names, it will\n * execute that function (functor case). Otherwise, if it is a transformer,\n * uses transducer [xf] to return a new transformer (transducer case).\n * Otherwise, it will default to executing [fn].\n *\n * @private\n * @param {Array} methodNames properties to check for a custom implementation\n * @param {Function} xf transducer to initialize if object is transformer\n * @param {Function} fn default ramda implementation\n * @return {Function} A function that dispatches on object in list position\n */\nexport default function _dispatchable(methodNames, xf, fn) {\n  return function () {\n    if (arguments.length === 0) {\n      return fn();\n    }\n    var args = Array.prototype.slice.call(arguments, 0);\n    var obj = args.pop();\n    if (!_isArray(obj)) {\n      var idx = 0;\n      while (idx < methodNames.length) {\n        if (typeof obj[methodNames[idx]] === 'function') {\n          return obj[methodNames[idx]].apply(obj, args);\n        }\n        idx += 1;\n      }\n      if (_isTransformer(obj)) {\n        var transducer = xf.apply(null, args);\n        return transducer(obj);\n      }\n    }\n    return fn.apply(this, arguments);\n  };\n}","export default function _isTransformer(obj) {\n  return obj != null && typeof obj['@@transducer/step'] === 'function';\n}","export default {\n  init: function () {\n    return this.xf['@@transducer/init']();\n  },\n  result: function (result) {\n    return this.xf['@@transducer/result'](result);\n  }\n};","export default function _map(fn, functor) {\n  var idx = 0;\n  var len = functor.length;\n  var result = Array(len);\n  while (idx < len) {\n    result[idx] = fn(functor[idx]);\n    idx += 1;\n  }\n  return result;\n}","export default function _isString(x) {\n  return Object.prototype.toString.call(x) === '[object String]';\n}","import _curry1 from './_curry1.js';\nimport _isArray from './_isArray.js';\nimport _isString from './_isString.js';\n\n/**\n * Tests whether or not an object is similar to an array.\n *\n * @private\n * @category Type\n * @category List\n * @sig * -> Boolean\n * @param {*} x The object to test.\n * @return {Boolean} `true` if `x` has a numeric length property and extreme indices defined; `false` otherwise.\n * @example\n *\n *      _isArrayLike([]); //=> true\n *      _isArrayLike(true); //=> false\n *      _isArrayLike({}); //=> false\n *      _isArrayLike({length: 10}); //=> false\n *      _isArrayLike({0: 'zero', 9: 'nine', length: 10}); //=> true\n */\nvar _isArrayLike = /*#__PURE__*/_curry1(function isArrayLike(x) {\n  if (_isArray(x)) {\n    return true;\n  }\n  if (!x) {\n    return false;\n  }\n  if (typeof x !== 'object') {\n    return false;\n  }\n  if (_isString(x)) {\n    return false;\n  }\n  if (x.nodeType === 1) {\n    return !!x.length;\n  }\n  if (x.length === 0) {\n    return true;\n  }\n  if (x.length > 0) {\n    return x.hasOwnProperty(0) && x.hasOwnProperty(x.length - 1);\n  }\n  return false;\n});\nexport default _isArrayLike;","var XWrap = /*#__PURE__*/function () {\n  function XWrap(fn) {\n    this.f = fn;\n  }\n  XWrap.prototype['@@transducer/init'] = function () {\n    throw new Error('init not implemented on XWrap');\n  };\n  XWrap.prototype['@@transducer/result'] = function (acc) {\n    return acc;\n  };\n  XWrap.prototype['@@transducer/step'] = function (acc, x) {\n    return this.f(acc, x);\n  };\n\n  return XWrap;\n}();\n\nexport default function _xwrap(fn) {\n  return new XWrap(fn);\n}","import _arity from './internal/_arity.js';\nimport _curry2 from './internal/_curry2.js';\n\n/**\n * Creates a function that is bound to a context.\n * Note: `R.bind` does not provide the additional argument-binding capabilities of\n * [Function.prototype.bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\n *\n * @func\n * @memberOf R\n * @since v0.6.0\n * @category Function\n * @category Object\n * @sig (* -> *) -> {*} -> (* -> *)\n * @param {Function} fn The function to bind to context\n * @param {Object} thisObj The context to bind `fn` to\n * @return {Function} A function that will execute in the context of `thisObj`.\n * @see R.partial\n * @example\n *\n *      const log = R.bind(console.log, console);\n *      R.pipe(R.assoc('a', 2), R.tap(log), R.assoc('a', 3))({a: 1}); //=> {a: 3}\n *      // logs {a: 2}\n * @symb R.bind(f, o)(a, b) = f.call(o, a, b)\n */\nvar bind = /*#__PURE__*/_curry2(function bind(fn, thisObj) {\n  return _arity(fn.length, function () {\n    return fn.apply(thisObj, arguments);\n  });\n});\nexport default bind;","import _isArrayLike from './_isArrayLike.js';\nimport _xwrap from './_xwrap.js';\nimport bind from '../bind.js';\n\nfunction _arrayReduce(xf, acc, list) {\n  var idx = 0;\n  var len = list.length;\n  while (idx < len) {\n    acc = xf['@@transducer/step'](acc, list[idx]);\n    if (acc && acc['@@transducer/reduced']) {\n      acc = acc['@@transducer/value'];\n      break;\n    }\n    idx += 1;\n  }\n  return xf['@@transducer/result'](acc);\n}\n\nfunction _iterableReduce(xf, acc, iter) {\n  var step = iter.next();\n  while (!step.done) {\n    acc = xf['@@transducer/step'](acc, step.value);\n    if (acc && acc['@@transducer/reduced']) {\n      acc = acc['@@transducer/value'];\n      break;\n    }\n    step = iter.next();\n  }\n  return xf['@@transducer/result'](acc);\n}\n\nfunction _methodReduce(xf, acc, obj, methodName) {\n  return xf['@@transducer/result'](obj[methodName](bind(xf['@@transducer/step'], xf), acc));\n}\n\nvar symIterator = typeof Symbol !== 'undefined' ? Symbol.iterator : '@@iterator';\n\nexport default function _reduce(fn, acc, list) {\n  if (typeof fn === 'function') {\n    fn = _xwrap(fn);\n  }\n  if (_isArrayLike(list)) {\n    return _arrayReduce(fn, acc, list);\n  }\n  if (typeof list['fantasy-land/reduce'] === 'function') {\n    return _methodReduce(fn, acc, list, 'fantasy-land/reduce');\n  }\n  if (list[symIterator] != null) {\n    return _iterableReduce(fn, acc, list[symIterator]());\n  }\n  if (typeof list.next === 'function') {\n    return _iterableReduce(fn, acc, list);\n  }\n  if (typeof list.reduce === 'function') {\n    return _methodReduce(fn, acc, list, 'reduce');\n  }\n\n  throw new TypeError('reduce: list must be array or iterable');\n}","import _curry2 from './_curry2.js';\nimport _xfBase from './_xfBase.js';\n\nvar XMap = /*#__PURE__*/function () {\n  function XMap(f, xf) {\n    this.xf = xf;\n    this.f = f;\n  }\n  XMap.prototype['@@transducer/init'] = _xfBase.init;\n  XMap.prototype['@@transducer/result'] = _xfBase.result;\n  XMap.prototype['@@transducer/step'] = function (result, input) {\n    return this.xf['@@transducer/step'](result, this.f(input));\n  };\n\n  return XMap;\n}();\n\nvar _xmap = /*#__PURE__*/_curry2(function _xmap(f, xf) {\n  return new XMap(f, xf);\n});\nexport default _xmap;","export default function _has(prop, obj) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}","import _has from './_has.js';\n\nvar toString = Object.prototype.toString;\nvar _isArguments = /*#__PURE__*/function () {\n  return toString.call(arguments) === '[object Arguments]' ? function _isArguments(x) {\n    return toString.call(x) === '[object Arguments]';\n  } : function _isArguments(x) {\n    return _has('callee', x);\n  };\n}();\n\nexport default _isArguments;","import _curry1 from './internal/_curry1.js';\nimport _has from './internal/_has.js';\nimport _isArguments from './internal/_isArguments.js';\n\n// cover IE < 9 keys issues\nvar hasEnumBug = ! /*#__PURE__*/{ toString: null }.propertyIsEnumerable('toString');\nvar nonEnumerableProps = ['constructor', 'valueOf', 'isPrototypeOf', 'toString', 'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n// Safari bug\nvar hasArgsEnumBug = /*#__PURE__*/function () {\n  'use strict';\n\n  return arguments.propertyIsEnumerable('length');\n}();\n\nvar contains = function contains(list, item) {\n  var idx = 0;\n  while (idx < list.length) {\n    if (list[idx] === item) {\n      return true;\n    }\n    idx += 1;\n  }\n  return false;\n};\n\n/**\n * Returns a list containing the names of all the enumerable own properties of\n * the supplied object.\n * Note that the order of the output array is not guaranteed to be consistent\n * across different JS platforms.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Object\n * @sig {k: v} -> [k]\n * @param {Object} obj The object to extract properties from\n * @return {Array} An array of the object's own properties.\n * @see R.keysIn, R.values\n * @example\n *\n *      R.keys({a: 1, b: 2, c: 3}); //=> ['a', 'b', 'c']\n */\nvar keys = typeof Object.keys === 'function' && !hasArgsEnumBug ? /*#__PURE__*/_curry1(function keys(obj) {\n  return Object(obj) !== obj ? [] : Object.keys(obj);\n}) : /*#__PURE__*/_curry1(function keys(obj) {\n  if (Object(obj) !== obj) {\n    return [];\n  }\n  var prop, nIdx;\n  var ks = [];\n  var checkArgsLength = hasArgsEnumBug && _isArguments(obj);\n  for (prop in obj) {\n    if (_has(prop, obj) && (!checkArgsLength || prop !== 'length')) {\n      ks[ks.length] = prop;\n    }\n  }\n  if (hasEnumBug) {\n    nIdx = nonEnumerableProps.length - 1;\n    while (nIdx >= 0) {\n      prop = nonEnumerableProps[nIdx];\n      if (_has(prop, obj) && !contains(ks, prop)) {\n        ks[ks.length] = prop;\n      }\n      nIdx -= 1;\n    }\n  }\n  return ks;\n});\nexport default keys;","import _curry2 from './internal/_curry2.js';\nimport _dispatchable from './internal/_dispatchable.js';\nimport _map from './internal/_map.js';\nimport _reduce from './internal/_reduce.js';\nimport _xmap from './internal/_xmap.js';\nimport curryN from './curryN.js';\nimport keys from './keys.js';\n\n/**\n * Takes a function and\n * a [functor](https://github.com/fantasyland/fantasy-land#functor),\n * applies the function to each of the functor's values, and returns\n * a functor of the same shape.\n *\n * Ramda provides suitable `map` implementations for `Array` and `Object`,\n * so this function may be applied to `[1, 2, 3]` or `{x: 1, y: 2, z: 3}`.\n *\n * Dispatches to the `map` method of the second argument, if present.\n *\n * Acts as a transducer if a transformer is given in list position.\n *\n * Also treats functions as functors and will compose them together.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig Functor f => (a -> b) -> f a -> f b\n * @param {Function} fn The function to be called on every element of the input `list`.\n * @param {Array} list The list to be iterated over.\n * @return {Array} The new list.\n * @see R.transduce, R.addIndex\n * @example\n *\n *      const double = x => x * 2;\n *\n *      R.map(double, [1, 2, 3]); //=> [2, 4, 6]\n *\n *      R.map(double, {x: 1, y: 2, z: 3}); //=> {x: 2, y: 4, z: 6}\n * @symb R.map(f, [a, b]) = [f(a), f(b)]\n * @symb R.map(f, { x: a, y: b }) = { x: f(a), y: f(b) }\n * @symb R.map(f, functor_o) = functor_o.map(f)\n */\nvar map = /*#__PURE__*/_curry2( /*#__PURE__*/_dispatchable(['fantasy-land/map', 'map'], _xmap, function map(fn, functor) {\n  switch (Object.prototype.toString.call(functor)) {\n    case '[object Function]':\n      return curryN(functor.length, function () {\n        return fn.call(this, functor.apply(this, arguments));\n      });\n    case '[object Object]':\n      return _reduce(function (acc, key) {\n        acc[key] = fn(functor[key]);\n        return acc;\n      }, {}, keys(functor));\n    default:\n      return _map(fn, functor);\n  }\n}));\nexport default map;","import _curry3 from './internal/_curry3.js';\nimport _reduce from './internal/_reduce.js';\n\n/**\n * Returns a single item by iterating through the list, successively calling\n * the iterator function and passing it an accumulator value and the current\n * value from the array, and then passing the result to the next call.\n *\n * The iterator function receives two values: *(acc, value)*. It may use\n * [`R.reduced`](#reduced) to shortcut the iteration.\n *\n * The arguments' order of [`reduceRight`](#reduceRight)'s iterator function\n * is *(value, acc)*.\n *\n * Note: `R.reduce` does not skip deleted or unassigned indices (sparse\n * arrays), unlike the native `Array.prototype.reduce` method. For more details\n * on this behavior, see:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce#Description\n *\n * Dispatches to the `reduce` method of the third argument, if present. When\n * doing so, it is up to the user to handle the [`R.reduced`](#reduced)\n * shortcuting, as this is not implemented by `reduce`.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig ((a, b) -> a) -> a -> [b] -> a\n * @param {Function} fn The iterator function. Receives two values, the accumulator and the\n *        current element from the array.\n * @param {*} acc The accumulator value.\n * @param {Array} list The list to iterate over.\n * @return {*} The final, accumulated value.\n * @see R.reduced, R.addIndex, R.reduceRight\n * @example\n *\n *      R.reduce(R.subtract, 0, [1, 2, 3, 4]) // => ((((0 - 1) - 2) - 3) - 4) = -10\n *      //          -               -10\n *      //         / \\              / \\\n *      //        -   4           -6   4\n *      //       / \\              / \\\n *      //      -   3   ==>     -3   3\n *      //     / \\              / \\\n *      //    -   2           -1   2\n *      //   / \\              / \\\n *      //  0   1            0   1\n *\n * @symb R.reduce(f, a, [b, c, d]) = f(f(f(a, b), c), d)\n */\nvar reduce = /*#__PURE__*/_curry3(_reduce);\nexport default reduce;","export default function _pipe(f, g) {\n  return function () {\n    return g.call(this, f.apply(this, arguments));\n  };\n}","import _isArray from './_isArray.js';\n\n/**\n * This checks whether a function has a [methodname] function. If it isn't an\n * array it will execute that function otherwise it will default to the ramda\n * implementation.\n *\n * @private\n * @param {Function} fn ramda implemtation\n * @param {String} methodname property to check for a custom implementation\n * @return {Object} Whatever the return value of the method is.\n */\nexport default function _checkForMethod(methodname, fn) {\n  return function () {\n    var length = arguments.length;\n    if (length === 0) {\n      return fn();\n    }\n    var obj = arguments[length - 1];\n    return _isArray(obj) || typeof obj[methodname] !== 'function' ? fn.apply(this, arguments) : obj[methodname].apply(obj, Array.prototype.slice.call(arguments, 0, length - 1));\n  };\n}","import _checkForMethod from './internal/_checkForMethod.js';\nimport _curry3 from './internal/_curry3.js';\n\n/**\n * Returns the elements of the given list or string (or object with a `slice`\n * method) from `fromIndex` (inclusive) to `toIndex` (exclusive).\n *\n * Dispatches to the `slice` method of the third argument, if present.\n *\n * @func\n * @memberOf R\n * @since v0.1.4\n * @category List\n * @sig Number -> Number -> [a] -> [a]\n * @sig Number -> Number -> String -> String\n * @param {Number} fromIndex The start index (inclusive).\n * @param {Number} toIndex The end index (exclusive).\n * @param {*} list\n * @return {*}\n * @example\n *\n *      R.slice(1, 3, ['a', 'b', 'c', 'd']);        //=> ['b', 'c']\n *      R.slice(1, Infinity, ['a', 'b', 'c', 'd']); //=> ['b', 'c', 'd']\n *      R.slice(0, -1, ['a', 'b', 'c', 'd']);       //=> ['a', 'b', 'c']\n *      R.slice(-3, -1, ['a', 'b', 'c', 'd']);      //=> ['b', 'c']\n *      R.slice(0, 3, 'ramda');                     //=> 'ram'\n */\nvar slice = /*#__PURE__*/_curry3( /*#__PURE__*/_checkForMethod('slice', function slice(fromIndex, toIndex, list) {\n  return Array.prototype.slice.call(list, fromIndex, toIndex);\n}));\nexport default slice;","import _checkForMethod from './internal/_checkForMethod.js';\nimport _curry1 from './internal/_curry1.js';\nimport slice from './slice.js';\n\n/**\n * Returns all but the first element of the given list or string (or object\n * with a `tail` method).\n *\n * Dispatches to the `slice` method of the first argument, if present.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig [a] -> [a]\n * @sig String -> String\n * @param {*} list\n * @return {*}\n * @see R.head, R.init, R.last\n * @example\n *\n *      R.tail([1, 2, 3]);  //=> [2, 3]\n *      R.tail([1, 2]);     //=> [2]\n *      R.tail([1]);        //=> []\n *      R.tail([]);         //=> []\n *\n *      R.tail('abc');  //=> 'bc'\n *      R.tail('ab');   //=> 'b'\n *      R.tail('a');    //=> ''\n *      R.tail('');     //=> ''\n */\nvar tail = /*#__PURE__*/_curry1( /*#__PURE__*/_checkForMethod('tail', /*#__PURE__*/slice(1, Infinity)));\nexport default tail;","import _curry1 from './internal/_curry1.js';\nimport _isString from './internal/_isString.js';\n\n/**\n * Returns a new list or string with the elements or characters in reverse\n * order.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig [a] -> [a]\n * @sig String -> String\n * @param {Array|String} list\n * @return {Array|String}\n * @example\n *\n *      R.reverse([1, 2, 3]);  //=> [3, 2, 1]\n *      R.reverse([1, 2]);     //=> [2, 1]\n *      R.reverse([1]);        //=> [1]\n *      R.reverse([]);         //=> []\n *\n *      R.reverse('abc');      //=> 'cba'\n *      R.reverse('ab');       //=> 'ba'\n *      R.reverse('a');        //=> 'a'\n *      R.reverse('');         //=> ''\n */\nvar reverse = /*#__PURE__*/_curry1(function reverse(list) {\n  return _isString(list) ? list.split('').reverse().join('') : Array.prototype.slice.call(list, 0).reverse();\n});\nexport default reverse;","import pipe from './pipe.js';\nimport reverse from './reverse.js';\n\n/**\n * Performs right-to-left function composition. The rightmost function may have\n * any arity; the remaining functions must be unary.\n *\n * **Note:** The result of compose is not automatically curried.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Function\n * @sig ((y -> z), (x -> y), ..., (o -> p), ((a, b, ..., n) -> o)) -> ((a, b, ..., n) -> z)\n * @param {...Function} ...functions The functions to compose\n * @return {Function}\n * @see R.pipe\n * @example\n *\n *      const classyGreeting = (firstName, lastName) => \"The name's \" + lastName + \", \" + firstName + \" \" + lastName\n *      const yellGreeting = R.compose(R.toUpper, classyGreeting);\n *      yellGreeting('James', 'Bond'); //=> \"THE NAME'S BOND, JAMES BOND\"\n *\n *      R.compose(Math.abs, R.add(1), R.multiply(2))(-4) //=> 7\n *\n * @symb R.compose(f, g, h)(a, b) = f(g(h(a, b)))\n */\nexport default function compose() {\n  if (arguments.length === 0) {\n    throw new Error('compose requires at least one argument');\n  }\n  return pipe.apply(this, reverse(arguments));\n}","import _arity from './internal/_arity.js';\nimport _pipe from './internal/_pipe.js';\nimport reduce from './reduce.js';\nimport tail from './tail.js';\n\n/**\n * Performs left-to-right function composition. The leftmost function may have\n * any arity; the remaining functions must be unary.\n *\n * In some libraries this function is named `sequence`.\n *\n * **Note:** The result of pipe is not automatically curried.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Function\n * @sig (((a, b, ..., n) -> o), (o -> p), ..., (x -> y), (y -> z)) -> ((a, b, ..., n) -> z)\n * @param {...Function} functions\n * @return {Function}\n * @see R.compose\n * @example\n *\n *      const f = R.pipe(Math.pow, R.negate, R.inc);\n *\n *      f(3, 4); // -(3^4) + 1\n * @symb R.pipe(f, g, h)(a, b) = h(g(f(a, b)))\n */\nexport default function pipe() {\n  if (arguments.length === 0) {\n    throw new Error('pipe requires at least one argument');\n  }\n  return _arity(arguments[0].length, reduce(_pipe, arguments[0], tail(arguments)));\n}","// Based on https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\nfunction _objectIs(a, b) {\n  // SameValue algorithm\n  if (a === b) {\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    return a !== 0 || 1 / a === 1 / b;\n  } else {\n    // Step 6.a: NaN == NaN\n    return a !== a && b !== b;\n  }\n}\n\nexport default typeof Object.is === 'function' ? Object.is : _objectIs;","/**\n * Polyfill from <https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString>.\n */\nvar pad = function pad(n) {\n  return (n < 10 ? '0' : '') + n;\n};\n\nvar _toISOString = typeof Date.prototype.toISOString === 'function' ? function _toISOString(d) {\n  return d.toISOString();\n} : function _toISOString(d) {\n  return d.getUTCFullYear() + '-' + pad(d.getUTCMonth() + 1) + '-' + pad(d.getUTCDate()) + 'T' + pad(d.getUTCHours()) + ':' + pad(d.getUTCMinutes()) + ':' + pad(d.getUTCSeconds()) + '.' + (d.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) + 'Z';\n};\n\nexport default _toISOString;","import _concat from './internal/_concat.js';\nimport _createPartialApplicator from './internal/_createPartialApplicator.js';\nimport flip from './flip.js';\n\n/**\n * Takes a function `f` and a list of arguments, and returns a function `g`.\n * When applied, `g` returns the result of applying `f` to the arguments\n * provided to `g` followed by the arguments provided initially.\n *\n * @func\n * @memberOf R\n * @since v0.10.0\n * @category Function\n * @sig ((a, b, c, ..., n) -> x) -> [d, e, f, ..., n] -> ((a, b, c, ...) -> x)\n * @param {Function} f\n * @param {Array} args\n * @return {Function}\n * @see R.partial\n * @example\n *\n *      const greet = (salutation, title, firstName, lastName) =>\n *        salutation + ', ' + title + ' ' + firstName + ' ' + lastName + '!';\n *\n *      const greetMsJaneJones = R.partialRight(greet, ['Ms.', 'Jane', 'Jones']);\n *\n *      greetMsJaneJones('Hello'); //=> 'Hello, Ms. Jane Jones!'\n * @symb R.partialRight(f, [a, b])(c, d) = f(c, d, a, b)\n */\nvar partialRight = /*#__PURE__*/_createPartialApplicator( /*#__PURE__*/flip(_concat));\nexport default partialRight;","import { deepCopy } from \"../../Utils/objects\";\n\n/**\n * Keys for each of the eight Attribues in MekWarrior4.\n */\nexport enum Attribute {\n    /** A measure of a character's raw muscle power. */\n    STR = 'Strength',\n    /** A measure of how sturdy or in-shape a character is. */\n    BOD = 'Body',\n    /** A measure of a character's swiftness and reaction time. */\n    RFL = 'Reflexes',\n    /** A measure of a character's fine motor control. */\n    DEX = 'Dexterity',\n    /** A measure of a character's brainpower, like memory and higher reasoning */\n    INT = 'Intelligence',\n    /** A measure of a character's bravery and ability to think for themselves */\n    WIL = 'Willpower',\n    /** A measure of a character's personal appeal. */\n    CHA = 'Charisma',\n    /** A measure of a character's raw luck. */\n    EDG = 'Edge',\n}\n\n/**\n * Describes the values that are associated with an attribute.\n */\nexport interface AttributeValues {\n    score: number;\n    link: number;\n    xp: number;\n}\n\n/**\n * A type representing the mapping between attribute keys and attribute value\n * objects.\n */\nexport type Attributes = Map<Attribute, AttributeValues>;\n\n/**\n * A function to act as the constructor for the `Attributes` type. If nothing\n * is provided, an empty set of `Attributes` will be generated. If another set\n * of `Attributes` are provided they will be deeply copied.\n *\n * @param attrs The `Attributes` to be shallow copied, or nothing.\n * @returns a new set of `Attributes`.\n */\nexport const newAttributes = (attrs?: Attributes | undefined): Attributes => {\n    const newAttrs: Attributes = new Map();\n    /* NOTE: This function body looks like a mess. And I have concerns about\n     * the performance of the copy constructor. Keep an eye on it.\n     */\n    if (attrs) {\n        newAttrs.set(Attribute.STR, deepCopy(attrs.get(Attribute.STR)));\n        newAttrs.set(Attribute.BOD, deepCopy(attrs.get(Attribute.BOD)));\n        newAttrs.set(Attribute.RFL, deepCopy(attrs.get(Attribute.RFL)));\n        newAttrs.set(Attribute.DEX, deepCopy(attrs.get(Attribute.DEX)));\n        newAttrs.set(Attribute.INT, deepCopy(attrs.get(Attribute.INT)));\n        newAttrs.set(Attribute.WIL, deepCopy(attrs.get(Attribute.WIL)));\n        newAttrs.set(Attribute.CHA, deepCopy(attrs.get(Attribute.CHA)));\n        newAttrs.set(Attribute.EDG, deepCopy(attrs.get(Attribute.EDG)));\n    } else {\n        const empty = emptyAttributeValues();\n        newAttrs.set(Attribute.STR, empty);\n        newAttrs.set(Attribute.BOD, empty);\n        newAttrs.set(Attribute.RFL, empty);\n        newAttrs.set(Attribute.DEX, empty);\n        newAttrs.set(Attribute.INT, empty);\n        newAttrs.set(Attribute.WIL, empty);\n        newAttrs.set(Attribute.CHA, empty);\n        newAttrs.set(Attribute.EDG, empty);\n    }\n\n    return newAttrs;\n};\n\n/**\n * A factory function to create a new `AttributeValues` object where all values\n * are set to 0.\n */\nexport const emptyAttributeValues = (): AttributeValues => ({\n    score: 0,\n    link: calculateLinkValue(0),\n    xp: 0,\n});\n\n/**\n * A function to alter the XP of an `Attribute` set. Given a `target` it will\n * change it by the provided `newXP` value; `newXP` can be either a positive or\n * negative number. Then the score and link value of the `attrs` will be\n * recalculated in a new copy.\n *\n * @param attrs the `Attributes` set being updated\n * @param target the `Attribute` to be changed in the `Attributes` set\n * @param newXP the amount to change the attribute's XP by (can be negative)\n * @returns A new copy of `attrs` with the `target` updated.\n */\nexport const changeXP = (\n    attrs: Attributes,\n    target: Attribute,\n    newXP: number): Attributes => {\n    const newAttrs = newAttributes(attrs);\n    const currentValues = newAttrs.get(target);\n\n    const xp = currentValues.xp + newXP;\n    const score = calculateScore(xp);\n    const link = calculateLinkValue(score);\n    newAttrs.set(target, { score, link, xp });\n\n    return newAttrs;\n};\n\n/**\n *\n * @param xp the anount of experience to be converted\n * @returns the score computed from the provided XP.\n */\nexport const calculateScore = (xp: number): number => Math.floor(xp / 100);\n\n/**\n * Takes the score of an `AttributeValues` object and determines the link\n * modifier for it.\n *\n * @param value the score for an attribute\n * @returns the link value for an `AttributeValues` object.\n */\nexport const calculateLinkValue = (value: number): number => {\n    if (value === 0) {\n        return -4;\n    } else if (value === 1) {\n        return -2;\n    } else if (value >= 2 && value <= 3) {\n        return -1;\n    } else if (value >= 4 && value <= 6) {\n        return 0;\n    } else if (value >= 7 && value <= 9) {\n        return 1;\n    } else if (value === 10) {\n        return 2;\n    } else {\n        const buff = Math.floor(value / 3);\n\n        return buff > 5 ? 5 : buff;\n    }\n};\n","import _curry1 from './internal/_curry1.js';\n\nvar ws = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' + '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028' + '\\u2029\\uFEFF';\nvar zeroWidth = '\\u200b';\nvar hasProtoTrim = typeof String.prototype.trim === 'function';\n/**\n * Removes (strips) whitespace from both ends of the string.\n *\n * @func\n * @memberOf R\n * @since v0.6.0\n * @category String\n * @sig String -> String\n * @param {String} str The string to trim.\n * @return {String} Trimmed version of `str`.\n * @example\n *\n *      R.trim('   xyz  '); //=> 'xyz'\n *      R.map(R.trim, R.split(',', 'x, y, z')); //=> ['x', 'y', 'z']\n */\nvar trim = !hasProtoTrim || /*#__PURE__*/ws.trim() || ! /*#__PURE__*/zeroWidth.trim() ? /*#__PURE__*/_curry1(function trim(str) {\n  var beginRx = new RegExp('^[' + ws + '][' + ws + ']*');\n  var endRx = new RegExp('[' + ws + '][' + ws + ']*$');\n  return str.replace(beginRx, '').replace(endRx, '');\n}) : /*#__PURE__*/_curry1(function trim(str) {\n  return str.trim();\n});\nexport default trim;","/**\n * Creates a deep copy of a given complex data type (objects, arrays, etc).\n * This approach is both slightly faster and more general than `Object.assign`.\n *\n * @param subject some object to be copied\n * @returns a deep copy of `subject`.\n */\nexport const deepCopy = <T>(subject: T): T => {\n    return JSON.parse(JSON.stringify(subject)) as T;\n};\n","/* TODO: This file is not coming together as well as the others. Unlike the\n * other interfaces, it's not obvious how to keep the state of an individual\n * skill and the basic information about a skill in one place.\n *\n * Parts of this file that ought to change:\n *  + Code about XP lists and learning levels should be somewhere else\n *  + No clean way to represent the difference between an individual instance\n *    of a Skill, and the Skill data it's based on.\n *    - If something is altered here, that pattern should also be applied to\n *      traits for consistency.\n *  + Learning values need to get passed around *a lot*.\n *    - There might be a possible solution to this with functions that deal\n *      with characters wrapping over these skill functions, so it's not really\n *      seen outside of character functions.\n *  + Have to recalculate current target number, complexity, and link\n *    attributes on every change, and it's not cached.\n *  + There should probably be some kind of type or union representing a\n *    complexity rating.\n *  + Need to use ts-ignore on an import.\n *  + There should be more documentation.\n */\nimport { map } from 'ramda';\nimport { findLastIndex } from '../../Utils/collections';\nimport { Attribute } from './attributes';\n\n// NOTE: Everything about XP lists and learning should maybe go in it's own file\nexport const standardXP: number[] = [20, 30, 50, 80, 120, 170, 230, 300, 380, 470, 570];\nexport const fastXP: number[] = map(x => Math.floor(x * 0.9), standardXP);\nexport const slowXP: number[] = map(x => Math.floor(x * 1.1), standardXP);\n\nexport enum Learning {\n  FAST = 'Fast',\n  STANDARD = 'Standard',\n  SLOW = 'Slow',\n}\n\nexport const xpList = (l: Learning): number[] => {\n  switch (l) {\n    case Learning.FAST:\n      return fastXP;\n    case Learning.STANDARD:\n      return standardXP;\n    case Learning.SLOW:\n      return slowXP;\n    default:\n      return standardXP;\n  }\n};\n\nexport interface Skill {\n  name: string;\n  level: number;\n  experience: number;\n  targetNumbers: [number, number?];\n  // NOTE: this might benefit from stricter typing.\n  complexityRatings: [string, string?];\n  linkedAttributes: [Attribute, [Attribute, Attribute]?];\n  tiered: boolean;\n  subSkill?: string;\n  specialty?: string;\n}\n\nconst tieredValue = <T>(s: Skill, l: Learning, ts: T[]): T => {\n  if (s.tiered) {\n    return s.level <= 3 ? ts[0] : ts[1];\n  } else {\n    return ts[0];\n  }\n};\n\nexport const changeXP = (s: Skill, l: Learning, xp: number): Skill => {\n  const experience = s.experience + xp;\n\n  return {\n    ...s,\n    experience,\n    level: levelForXP(l, experience),\n  };\n};\n\n/**\n * Determines the level of a skill based on XP.\n */\nexport const levelForXP = (l: Learning, xp: number) =>\n  findLastIndex((n: number) => xp >= n, xpList(l));\n\nexport const targetNumber = (s: Skill, l: Learning) => {\n  return tieredValue<number>(s, l, s.targetNumbers);\n};\n\nexport const complexity = (s: Skill, l: Learning) => {\n  return tieredValue<string>(s, l, s.complexityRatings);\n};\n\nexport const links = (s: Skill, l: Learning) => {\n  return tieredValue<Attribute | Attribute[]>(s, l, s.linkedAttributes);\n};\n\nexport const toString = (s: Skill) => {\n  let str = s.name;\n  if (s.subSkill) {\n    str = `${str}/${s.subSkill}`;\n  }\n  if (s.specialty) {\n    str = `${str} (${s.specialty})`;\n  }\n\n  return str;\n};\n","import { map } from \"ramda\";\nimport { Attributes, newAttributes } from \"./attributes\";\nimport {\n    Skill,\n    toString as skillToString\n} from \"./skills\";\nimport {\n    toString as traitToString,\n    Trait\n} from \"./traits\";\n\nexport interface CharacterFlavor {\n    /** A character's height, in centimeters. */\n    height: number;\n    /** A character's weight, in kilograms. */\n    weight: number;\n    /** A character's hair color. */\n    hair: string;\n    /** A character's eye color. */\n    eyes: string;\n    biography: string;\n}\n\nexport interface Character {\n    // TODO: names should have more to them than just being a single string.\n    name: string;\n    flavor: CharacterFlavor;\n    attributes: Attributes;\n    skills: Skill[];\n    traits: Trait[];\n}\n\nexport const newCharacterFlavor = () => ({\n    height: 170, // Roughly 5' 7\"\n    weight: 79, // Roughly 175lbs\n    hair: '',\n    eyes: '',\n    biography: '',\n});\n\nexport const newCharacter = () => ({\n    name: '',\n    flavor: newCharacterFlavor(),\n    attributes: newAttributes(),\n    skills: [] as Skill[],\n    traits: [] as Trait[],\n});\n\nexport const traitStrings = (c: Character) => map(traitToString, c.traits);\nexport const skillStrings = (c: Character) => map(skillToString, c.skills);\n","import { fromEvents } from \"kefir\";\nimport m, { route, RouteDefs, Vnode } from \"mithril\";\nimport { compose, map } from \"ramda\";\nimport { Character, newCharacter } from './MekWarrior4/interfaces/characters';\nimport { fastXP, slowXP, standardXP } from './MekWarrior4/interfaces/skills';\n\n// #region Testing\nconst character = newCharacter();\nconst xp1 = standardXP;\nconst xp2 = slowXP;\nconst xp3 = fastXP;\n// #endregion\n\n// #region Interfaces\ninterface Route {\n  name: string;\n  path: string;\n}\n\ninterface RouteSettings {\n  routes: Route[];\n  defaultRoute: string;\n}\n\ninterface RouteModel {\n  routes: Route[];\n  defaultRoute: string;\n  routeName: string;\n  params: object;\n}\n\ninterface State {\n  routing: RouteModel;\n  value: number;\n  text: string;\n}\n// #endregion\n\n// #region Initial\nconst element = document.body;\nconst EVENT_NAME = \"user:event\";\nconst eventValue = (event: Event) => {\n  const target = event.currentTarget as HTMLInputElement;\n\n  return target.value;\n};\nconst getSettings = (): RouteSettings => {\n  const routes: Route[] = [\n    { name: \"root\", path: \"/\" },\n    { name: \"secondary\", path: \"/foo\" },\n  ];\n  const defaultRoute = routes[0].path;\n\n  return {\n    routes,\n    defaultRoute,\n  };\n};\nconst settings = getSettings();\nconst initialState: State = {\n  routing: {\n    routes: settings.routes.slice(),\n    defaultRoute: settings.defaultRoute,\n    routeName: settings.defaultRoute,\n    params: undefined,\n  },\n  value: 20,\n  text: \"\",\n};\n// #endregion\n\n// #region Actions\n/**\n * A collection of action identifiers\n */\nenum ActionID {\n  TEMP_INCREASE = \"temp:increase\",\n  TEXT_CHANGE   = \"text:change\",\n  ROUTE_CHANGE  = \"route:change\",\n}\n\nconst dispatchAction = (name: ActionID) => (value: any) => {\n  const event = new CustomEvent(EVENT_NAME, { detail: { name, value } });\n  document.body.dispatchEvent(event);\n};\n\nconst increase = dispatchAction(ActionID.TEMP_INCREASE);\nconst newText = dispatchAction(ActionID.TEXT_CHANGE);\nconst routeChange = dispatchAction(ActionID.ROUTE_CHANGE);\n\nconst withEventValue = (action: any) => compose(action, eventValue);\n// #endregion\n\n// #region view\nconst Nav = {\n  view: ({ attrs }: Vnode<RouteModel>) => m(\n    'nav',\n    { style: 'margin-bottom: 10px' },\n    map(\n      (r) => m(\n        'a',\n        {\n          href: r.path,\n          oncreate: route.link,\n          style: 'margin: 0 5px',\n        },\n        r.name\n      ),\n      attrs.routes\n    )\n  ),\n};\n\nconst Main = {\n  view: ({ attrs }: Vnode<State>) =>\n    m('#main', [\n      m('span', { style: 'display: block' }, `Temp: ${attrs.value}`),\n      m('span', { style: 'display: block' }, `Text: ${attrs.text}`),\n      m(\n        'button',\n        {\n          onclick: () => { increase(1); },\n          style: 'display: block',\n        },\n        'increase temp'\n      ),\n      m('input', {\n        type: 'text',\n        style: 'display: block',\n        placeholder: 'enter something',\n        onkeyup: withEventValue(newText),\n      }),\n    ]),\n};\n\nconst Alt = {\n  view: (_: Vnode<State>) =>\n    m('#alt', [\n      m('h1', 'this is the alternate page'),\n      map((x) => m('p', x), fastXP),\n    ]),\n};\n\nconst whereTo = (attrs: State) => {\n  const { routing } = attrs;\n  switch (routing.routeName) {\n    case '/':\n      return m(Main, attrs);\n    default:\n      return m(Alt, attrs);\n  }\n};\n\nconst Root = {\n  view: ({ attrs }: Vnode<State>) =>\n    m('#root', [m(Nav, attrs.routing), whereTo(attrs)]),\n};\n// #endregion\n\n// #region router\nconst createRouteDefinition = (model: State): RouteDefs => {\n  const { routing } = model;\n\n  return routing.routes.reduce((accumulator, r) => {\n    accumulator[r.path] = {\n      onmatch: (params: any, _: any) => {\n        /* NOTE: This gets invoked on every update, don't fire an event to\n         * change the route unless it's actually changed, or there will be\n         * callstack errors.\n         */\n        if (model.routing.routeName !== r.path) {\n          routeChange({\n            routeName: r.path,\n            params,\n          });\n        }\n      },\n      render: () => {\n        return m(Root, model);\n      },\n    };\n\n    return accumulator;\n  },\n  {} as { [id: string]: any }\n  );\n};\n// #endregion\n\n// #region reducer\nconst commandBus = (state: State, command: CustomEvent): State => {\n  const { detail } = command;\n\n  switch (detail.name) {\n    case ActionID.TEMP_INCREASE:\n      state.value += detail.value;\n\n      return state;\n    case ActionID.TEXT_CHANGE:\n      state.text = detail.value;\n\n      return state;\n    case ActionID.ROUTE_CHANGE:\n      state.routing.routeName = detail.value.routeName;\n      state.routing.defaultRoute = detail.value.params;\n\n      return state;\n    default:\n      return state;\n  }\n};\n// #endregion\n\n// #region render\nconst stream = fromEvents(element, EVENT_NAME);\nconst dispatcher = stream.scan(commandBus, initialState);\nconst routeDefinitions = createRouteDefinition(initialState);\n\ndispatcher.onValue(state => {\n  route(element, state.routing.defaultRoute, routeDefinitions);\n});\n// #endregion\n"],"names":["exports","extend","target","length","arguments","i","prop","inherit","Child","Parent","proto","F","prototype","constructor","NOTHING","END","VALUE","ERROR","ANY","concat","a","b","result","j","Array","find","arr","value","findByPred","pred","cloneArray","input","remove","index","map","fn","callSubscriber","type","event","Dispatcher","this","_items","_spies","_inLoop","_removedItems","Observable","_dispatcher","_active","_alive","_activating","_logHandlers","_spyHandlers","Stream","call","Property","_currentEvent","add","x","push","addSpy","removeSpy","indexOf","dispatch","spies","_i","items","cleanup","_name","_onActivation","_onDeactivation","_setActive","active","_clear","_emit","_emitValue","_emitError","_emitEnd","_on","_off","count","onValue","onError","onEnd","onAny","offValue","offError","offEnd","offAny","observe","observerOrOnValue","_this","closed","observer","error","end","handler","unsubscribe","_ofSameType","A","B","getType","setName","sourceObs","selfName","log","name","undefined","toString","isCurrent","console","offLog","handlerIndex","obj","splice","spy","offSpy","neverS","never","timeBased","mixin","AnonymousStream","wait","options","_wait","_intervalId","_$onTick","_onTick","_init","_free","setInterval","clearInterval","S","_ref","_x","later","S$1","interval","S$2","xs","_xs","shift","sequentially","S$3","_fn","fromPoll","emitter","obs","e","emit","emitEvent","S$4","_emitter","withInterval","S$5","_unsubscribe","stream","fromCallback","callbackConsumer","called","fromNodeCallback","spread","apply","_callUnsubscribe","pairs","fromEvents","eventName","transformer","sub","unsub","Error","c","aLength","fromSubUnsub","P","current","constant","P$1","constantError","createConstructor","BaseClass","source","_source","_$handleAny","_handleAny","createClassMethods","_handleValue","_handleError","_handleEnd","createStream","createProperty","P$2","_getInitialCurrent","getInitial","toProperty","S$6","fromPromise","promise","_promise","then","done","getGlodalPromise","Promise","commonjsGlobal","window","global","self","createCommonjsModule","module","ponyfill","Object","defineProperty","root","_Symbol","Symbol","observable","_ponyfill2","__esModule","default","$$observable","fromESObservable","_observable","subscribe","next","complete","ESObservable","takeErrors","toESObservable","collect","keys","values","hasOwnProperty","Combine","passive","combinator","_activeCount","_sources","_combinator","_aliveCount","_latestValues","_latestErrors","fillArray","_emitAfterActivation","_endAfterActivation","_latestErrorIndex","_$handlers","_loop","combine","isArray","combineAsArray","activeObservables","passiveObservables","combineAsObject","observerOrOnNext","onComplete","subscription","_emitIfFull","hasAllValues","hasErrors","valuesCopy","errorsCopy","errors","latestError","defaultErrorsCombinator","Observable$2","empty","merge","of","bimap","fnErr","fnVal","mapErrors","ap","obsFn","obsVal","val","chain","flatMap","staticLand","freeze","S$7","P$3","id","map$1","mixin$1","S$8","P$4","id$1","mixin$2","n","_n","S$9","P$5","mixin$3","S$10","P$6","mixin$4","S$11","P$7","id$2","mixin$5","_lastValue","S$12","P$8","mixin$6","Math","max","S$13","P$9","mixin$7","S$14","P$10","id$3","mixin$8","_prev","S$15","P$11","eq","skipDuplicates","mixin$9","seed","S$16","P$12","defaultFn","P$13","_seed","S$17","id$4","END_MARKER","mixin$11","_buff","_$shiftBuff","setTimeout","S$18","P$14","now","Date","getTime","mixin$12","leading","trailing","_leading","_trailing","_trailingValue","_timeoutId","_endLater","_lastCallTime","_$trailingCall","_trailingCall","curTime","remaining","_cancelTrailing","clearTimeout","S$19","P$15","mixin$13","immediate","_immediate","_lastAttempt","_laterValue","_$later","_later","last","S$20","P$16","mixin$14","S$21","P$17","id$5","mixin$15","S$22","P$18","id$6","mixin$16","S$23","P$19","mixin$17","S$24","P$20","mixin$18","S$25","P$21","mixin$19","S$26","P$22","mixin$20","min","_max","_min","cur","offset","slide","S$27","P$23","mixin$21","flushOnEnd","_flushOnEnd","_flush","S$28","P$24","id$7","mixin$22","_count","S$29","P$25","mixin$23","S$30","P$26","mixin$24","transducer","_xform","@@transducer/step","res","@@transducer/result","S$31","P$27","mixin$25","_handler","S$32","P$28","Zip","sources","_buffers","zip","observables","_isFull","id$8","AbstractPool","_ref$queueLim","queueLim","_ref$concurLim","concurLim","_ref$drop","drop","_queueLim","_concurLim","_drop","_queue","_curSources","_$handleSubAny","_handleSubAny","_$endHandlers","_currentlyAdding","Merge","_addAll","_initialised","S$33","generator","_generator","_iteration","_add","toObs","_addToCur","_addToQueue","_removeOldest","obss","_this2","forEach","_remove","_removeCur","_removeQueue","_pullQueue","_onEmpty","_subToEnd","_this3","_subscribe","onEndI","_isEmpty","_getSource","repeat","concat$1","Pool","FlatMap","_mainEnded","_lastCurrent","_$handleMain","_handleMain","FlatMapErrors","createConstructor$1","primary","secondary","_primary","_secondary","_lastSecondary","_$handleSecondaryAny","_handleSecondaryAny","_$handlePrimaryAny","_handlePrimaryAny","createClassMethods$1","_handlePrimaryValue","_handlePrimaryError","_handlePrimaryEnd","_handleSecondaryValue","_handleSecondaryError","_handleSecondaryEnd","_removeSecondary","createStream$1","createProperty$1","plug","unplug","_hadNoEvSinceDeact","sameCurr","mixin$26","S$34","P$29","id2","_","mixin$27","S$35","P$30","mixin$28","S$36","P$31","mixin$29","_ref$flushOnEnd","S$37","P$32","mixin$30","_ref$flushOnChange","flushOnChange","_flushOnChange","S$38","P$33","f","t","mixin$31","convert","S$39","P$34","defFn","mixin$32","S$40","P$35","defFn$1","mixin$33","S$41","P$36","changes","toPromise","resolve","reject","filter","take","takeWhile","skip","skipWhile","diff","scan","flatten","delay","throttle","_ref2","_ref2$leading","_ref2$trailing","debounce","_ref2$immediate","filterErrors","ignoreValues","ignoreErrors","ignoreEnd","beforeEnd","slidingWindow","bufferWhile","_ref2$flushOnEnd","bufferWithCount","bufferWhile$1","bufferWithTimeOrCount","transduce","withHandler","thru","other","pool","flatMapLatest","flatMapFirst","flatMapConcat","flatMapConcurLimit","limit","flatMapErrors","filterBy","sampledBy","skipUntilBy","takeUntilBy","bufferBy","bufferWhileBy","DEPRECATION_WARNINGS","warn","msg","awaiting","valuesToErrors","errorsToValues","endOnError","Kefir","dissableDeprecationWarnings","factory","Vnode","tag","key","attrs0","children","text","dom","attrs","domSize","state","_state","events","instance","normalize","node","normalizeChildren","selectorParser","selectorCache","hasOwn","isEmpty","object","hyperscript","selector","start","view","cached","match","classes","exec","attrValue","replace","className","join","compileSelector","normalized","childList","hasAttrs","class","newAttrs","execSelector","trust","html","fragment","attrs1","m","PromisePolyfill","executor","TypeError","resolvers","rejectors","resolveCurrent","rejectCurrent","_instance","callAsync","setImmediate","list","shouldAbsorb","execute","retry","executeOnce","bind","runs","run","onerror","onFulfilled","onRejection","resolveNext","rejectNext","handle","callback","catch","all","total","consume","race","buildQueryString","args","key0","destructure","encodeURIComponent","FILE_PROTOCOL_REGEX","RegExp","requestService","$window","oncompletion","callbackCount","finalizer","finalize","promise0","then0","extra","url","interpolate","data","tokens","slice","assemble","querystring","prefix","deserialize","JSON","parse","extract","xhr","responseText","cast","type0","request","method","toUpperCase","useBody","serialize","FormData","stringify","XMLHttpRequest","aborted","_abort","abort","open","async","user","password","headers","setRequestHeader","withCredentials","config","onreadystatechange","readyState","response","status","test","send","background","jsonp","callbackName","round","random","script","document","createElement","parentNode","removeChild","callbackKey","src","documentElement","appendChild","setCompletionCallback","_8","coreRenderer","onevent","$doc","$emptyFragment","createDocumentFragment","nameSpace","svg","math","getNameSpace","vnode","xmlns","createNodes","parent","vnodes","hooks","nextSibling","ns","createNode","initComponent","element","insertNode","createComponent","initLifecycle","createTextNode","createText","createHTML","firstChild","childNodes","createFragment","attrs2","is","createElementNS","key2","setAttr","setAttrs","contenteditable","setContentEditable","textContent","selectedIndex","setLateAttrs","parent1","caption","thead","tbody","tfoot","tr","th","td","colgroup","col","temp","innerHTML","child","sentinel","create","$$reentrantLock$$","updateNodes","old","recycling","removeNodes","isUnkeyed","getNextSibling","updateNode","abs","oldChildrenLength","poolChildrenLength","vnodesChildrenLength","isRecyclable","oldStart","oldEnd","o","v","shouldRecycle","toFragment","getKeyMap","oldIndex","movable","oldTag","forceVnodeUpdate","forceComponentUpdate","onbeforeupdate","shouldNotUpdate","updateLifecycle","nodeValue","updateText","updateHTML","updateFragment","isLifecycleMethod","removeAttribute","updateEvent","updateAttrs","updateElement","removeNode","updateComponent","count0","insertBefore","content","context","expected","onbeforeremove","continuation","onremove","removeNodeFromDOM","oncreate","onupdate","attr","activeElement","isFormAttribute","nsLastIndex","substr","setAttributeNS","style","cssText","updateStyle","isCustomElement","normalized0","setAttribute","removeEventListener","addEventListener","oninit","render","namespace","namespaceURI","focus","setEventCallback","redrawService","renderService","redraw","callbacks","key1","pending","timeout","requestAnimationFrame","_11","redrawService0","mount","component","parseQueryString","string","charAt","entries","split","data0","counters","entry","key5","decodeURIComponent","levels","cursor","pop","level","nextLevel","isNumber","isNaN","parseInt","isValue","coreRouter","asyncId","supportsPushState","history","pushState","callAsync0","normalize1","fragment0","location","parsePath","path","queryData","hashData","queryIndex","hashIndex","pathEnd","queryEnd","queryParams","key4","hashParams","router","getPath","setPath","match2","token","query","hash","title","onpopstate","replaceState","href","defineRoutes","routes","resolveRoute","params","pathname","k","route0","matcher","callback0","onhashchange","route","render1","attrs3","currentPath","lastUpdate","routeService","defaultRoute","run1","bail","payload","update","routeResolver","comp","onmatch","resolved","set","get","prefix0","link","vnode1","onclick","ctrlKey","metaKey","shiftKey","which","preventDefault","getAttribute","param","key3","_20","withAttr","attrName","callback1","currentTarget","_28","version","_isPlaceholder","_curry1","f1","_curry2","f2","_b","_a","_arity","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","_curryN","received","combined","argsIdx","left","combinedIdx","curryN","_curry3","f3","_c","_dispatchable","methodNames","xf","_isArray","idx","_isTransformer","init","_map","functor","len","_isString","_isArrayLike","nodeType","XWrap","acc","_xwrap","thisObj","_iterableReduce","iter","step","_methodReduce","methodName","symIterator","iterator","_reduce","_arrayReduce","reduce","XMap","_xfBase","_xmap","_has","_isArguments","hasEnumBug","propertyIsEnumerable","nonEnumerableProps","hasArgsEnumBug","contains","item","nIdx","ks","checkArgsLength","_pipe","g","_checkForMethod","methodname","fromIndex","toIndex","tail","Infinity","reverse","compose","pad","toISOString","Attribute","ws","deepCopy","String","trim","str","beginRx","endRx","subject","Learning","newAttributes","Map","STR","BOD","RFL","DEX","INT","WIL","CHA","EDG","emptyAttributeValues","score","calculateLinkValue","xp","buff","floor","standardXP","fastXP","ActionID","body","eventValue","settings","initialState","routing","routeName","model","dispatchAction","CustomEvent","detail","dispatchEvent","increase","TEMP_INCREASE","newText","TEXT_CHANGE","routeChange","ROUTE_CHANGE","Nav","r","Main","action","placeholder","onkeyup","Alt","whereTo","Root","dispatcher","command","routeDefinitions","accumulator"],"mappings":"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"}